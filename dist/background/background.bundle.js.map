{"version":3,"file":"background/background.bundle.js","mappings":"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","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/storage/storage-def.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/storage/storage-fn.ts","webpack://media-downloader/./src/background/background.ts"],"sourcesContent":["export var MediaInfoKeyEnum;\n(function (MediaInfoKeyEnum) {\n    MediaInfoKeyEnum[\"IMAGE\"] = \"image\";\n    MediaInfoKeyEnum[\"AUDIO\"] = \"audio\";\n    MediaInfoKeyEnum[\"VIDEO\"] = \"video\";\n})(MediaInfoKeyEnum || (MediaInfoKeyEnum = {}));\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nexport var ThemeType;\n(function (ThemeType) {\n    ThemeType[\"LIGHT\"] = \"light\";\n    ThemeType[\"DARK\"] = \"dark\";\n    ThemeType[\"SYSTEM\"] = \"system\";\n})(ThemeType || (ThemeType = {}));\nexport var DefaultActionType;\n(function (DefaultActionType) {\n    DefaultActionType[\"POPUP\"] = \"popup\";\n    DefaultActionType[\"SIDE_PANEL\"] = \"side-panel\";\n})(DefaultActionType || (DefaultActionType = {}));\nexport const DEFAULT_SETTINGS = {\n    theme: ThemeType.SYSTEM,\n    defaultAction: DefaultActionType.POPUP,\n    previousVersion: null,\n    showChangelogLink: false,\n    lastOpenSection: MediaInfoKeyEnum.IMAGE,\n};\nexport const DEFAULT_SETTINGS_KEYS = Object.keys(DEFAULT_SETTINGS);\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            console.log('current tabUrl: ', tab === null || tab === void 0 ? void 0 : tab.url, tab);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            console.log('tabUrl: ', tab === null || tab === void 0 ? void 0 : tab.url);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url, filename = null) {\n    const downloadOptions = { url };\n    if (filename) {\n        downloadOptions.filename = filename;\n    }\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    if (!callback) {\n        callback = (response) => {\n        };\n    }\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, callback);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nimport { getStorageValue } from '../utils/chrome-api';\nimport { DEFAULT_SETTINGS, DefaultActionType, ThemeType } from './storage-def';\nexport function getStorageDefaultActionValue(callback) {\n    getStorageValue({ defaultAction: DefaultActionType.POPUP }, ({ defaultAction }) => {\n        if (!defaultAction) {\n            defaultAction = DEFAULT_SETTINGS.defaultAction;\n        }\n        callback(defaultAction);\n    });\n}\nexport function getStorageThemeValue(callback) {\n    getStorageValue({ theme: ThemeType.SYSTEM }, ({ theme }) => {\n        if (!theme) {\n            theme = DEFAULT_SETTINGS.theme;\n        }\n        callback(theme);\n    });\n}\nexport function getStoragePreviousVersionValue(callback) {\n    getStorageValue({ previousVersion: null }, ({ previousVersion }) => {\n        if (!previousVersion) {\n            previousVersion = DEFAULT_SETTINGS.previousVersion;\n        }\n        callback(previousVersion);\n    });\n}\nexport function getShowChangeLogLinkValue(callback) {\n    getStorageValue({ showChangelogLink: false }, ({ showChangelogLink }) => {\n        callback(!!showChangelogLink);\n    });\n}\nexport function getLastOpenSectionValue(callback) {\n    getStorageValue({ lastOpenSection: MediaInfoKeyEnum.IMAGE }, ({ lastOpenSection }) => {\n        if (!lastOpenSection) {\n            lastOpenSection = DEFAULT_SETTINGS.lastOpenSection;\n        }\n        callback(lastOpenSection);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DefaultActionType } from '../storage/storage-def';\nimport { getStorageDefaultActionValue, getStoragePreviousVersionValue } from '../storage/storage-fn';\nimport { MessageEventNameEnum } from '../types/message-event-name.enum';\nimport { contextMenuClicked, createContextMenu, getTab, getVersion, onActivateTab, onClickExtensionIcon, onCreateTab, onInstalled, onMessage, onReplaceTab, onUpdateTab, openPopup, openSidePanel, sendMessage, setPopupOptions, setSidePanelBehavior, setSidePanelOptions, setStorageValue, } from '../utils/chrome-api';\nfunction handleUpdate(details) {\n    if (details.reason !== 'update') {\n        return;\n    }\n    const currentVersion = getVersion();\n    getStoragePreviousVersionValue((previousVersion) => {\n        if (previousVersion !== currentVersion) {\n            setStorageValue({ showChangelogLink: true });\n        }\n        setStorageValue({ previousVersion: currentVersion });\n    });\n}\nfunction openDownloader(tab) {\n    getStorageDefaultActionValue((defaultAction) => {\n        switch (defaultAction) {\n            case DefaultActionType.POPUP:\n                openPopup();\n                break;\n            case DefaultActionType.SIDE_PANEL:\n                openSidePanel({ windowId: tab.windowId });\n                break;\n        }\n    });\n}\nfunction updateSidePanelAndPopupBehavior() {\n    const downloaderPath = '/views/downloader.html';\n    getStorageDefaultActionValue((defaultAction) => {\n        const isSidePanel = defaultAction === DefaultActionType.SIDE_PANEL;\n        const isPopup = defaultAction === DefaultActionType.POPUP;\n        const downloaderPathForPopup = isPopup\n            ? downloaderPath\n            : '';\n        const downloaderPathForSidePanel = isSidePanel\n            ? downloaderPath\n            : '';\n        setSidePanelBehavior({ openPanelOnActionClick: isSidePanel });\n        setSidePanelOptions({ path: downloaderPathForSidePanel });\n        setPopupOptions({ popup: downloaderPathForPopup });\n    });\n}\nonUpdateTab((tabId, changeInfo, tab) => {\n    updateSidePanelAndPopupBehavior();\n    sendMessage(MessageEventNameEnum.TAB_UPDATED, { tabId, changeInfo, tab });\n});\nonActivateTab((activeInfo) => {\n    updateSidePanelAndPopupBehavior();\n    sendMessage(MessageEventNameEnum.TAB_ACTIVATED, { tabId: activeInfo.tabId });\n});\nonReplaceTab((addedTabId) => {\n    updateSidePanelAndPopupBehavior();\n    sendMessage(MessageEventNameEnum.TAB_REPLACED, { tabId: addedTabId });\n});\nonCreateTab((tab) => {\n    updateSidePanelAndPopupBehavior();\n    sendMessage(MessageEventNameEnum.TAB_CREATED, { tab });\n});\nonClickExtensionIcon((tab) => {\n    updateSidePanelAndPopupBehavior();\n    openDownloader(tab);\n});\nonInstalled(details => {\n    updateSidePanelAndPopupBehavior();\n    createContextMenu({\n        id: 'openMediaDownloader',\n        title: 'Open Media Downloader',\n        contexts: ['page'],\n    });\n    handleUpdate(details);\n});\ncontextMenuClicked((info, tab) => {\n    if (info.menuItemId === 'openMediaDownloader') {\n        openDownloader(tab);\n    }\n});\nonMessage((message, sender, sendResponse) => __awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n    if (!((_a = sender.tab) === null || _a === void 0 ? void 0 : _a.id)) {\n        sendResponse(null);\n        return true;\n    }\n    if (message.eventName === MessageEventNameEnum.GET_TAB_INFO) {\n        const tab = yield getTab(sender.tab.id);\n        sendResponse(tab);\n        return true;\n    }\n}));\n"],"names":["DefaultActionType","ThemeType","MediaInfoKeyEnum","theme","SYSTEM","defaultAction","POPUP","previousVersion","showChangelogLink","lastOpenSection","IMAGE","Object","keys","MessageEventNameEnum","obj","callback","chrome","storage","sync","get","setStorageValue","set","sendMessage","eventName","data","response","runtime","_a","getStorageDefaultActionValue","openDownloader","tab","action","openPopup","options","SIDE_PANEL","sidePanel","open","openSidePanel","windowId","updateSidePanelAndPopupBehavior","downloaderPath","isSidePanel","downloaderPathForPopup","downloaderPathForSidePanel","openPanelOnActionClick","setPanelBehavior","catch","error","console","log","setOptions","setSidePanelOptions","path","setPopup","setPopupOptions","popup","tabId","changeInfo","TAB_UPDATED","tabs","onUpdated","addListener","onActivated","activeInfo","TAB_ACTIVATED","onReplaced","addedTabId","TAB_REPLACED","onCreated","TAB_CREATED","onClicked","onInstalled","details","properties","id","title","contexts","contextMenus","create","reason","currentVersion","getManifest","version","handleUpdate","info","menuItemId","onMessage","message","sender","sendResponse","thisArg","_arguments","generator","GET_TAB_INFO","this","_b","lastError","url","startsWith","_c","P","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","getTab"],"sourceRoot":""}