(()=>{"use strict";var t;function e(t){const e=[],r=document.querySelectorAll(t);return r.forEach((t=>e.push(t))),r}!function(t){t.TAB_CREATED="tabCreated",t.TAB_REPLACED="tabReplaced",t.TAB_UPDATED="tabUpdated",t.TAB_ACTIVATED="tabActivated",t.SEND_MEDIA="sendMedia",t.QUICK_SEND_MEDIA_FOR_DOWNLOAD="quickSendMediaForDownload",t.GET_TAB_INFO="getTabInfo",t.THEME_CHANGED="themeChanged"}(t||(t={}));const r=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:bmp|gif|jpe?g|png|svg|webp))(?:\?([^#]*))?(?:#(.*))?/i,n=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:mkv|flv|ogg|ogv|gifv|avi|mov|wmv|rm|rmvb|mp4|m4p|m4v|mpg|mpeg|3gp|3g2|webm))(?:\?([^#]*))?(?:#(.*))?/i,a=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:mp3|flac|ogg|wma))(?:\?([^#]*))?(?:#(.*))?/i;function o({src:t}){return!(t.includes("https://www.youtube.com")||t.includes("https://www.youtu.be")||t.includes("https://youtube.com")||t.includes("https://youtu.be"))}function u({src:t}){return!!t}function i(t){return t.startsWith("data:image")||r.test(t)}function s(t="",e=null){return{src:t,poster:e}}function c(t){if("img"===t.tagName.toLowerCase())return s(g(t));if("a"===t.tagName.toLowerCase()){const e=t.href;if(i(e))return s(e)}const e=window.getComputedStyle(t).backgroundImage;if(e){const t=m(e);if(i(t))return s(t)}return s()}function l(t){if("video"===t.tagName.toLowerCase()){return s(g(t.querySelector("source")||t),function(t){let e=t.getAttribute("poster")||t.getAttribute("data-poster")||"";const r=null==e?void 0:e.indexOf("#");return r>=0&&(e=e.substring(0,r+1)),e}(t))}if("a"===t.tagName.toLowerCase()){const r=t.href;if((e=r).startsWith("data:video")||n.test(e))return s(r,null)}var e;return s("",null)}function f(t){if("audio"===t.tagName.toLowerCase()){return s(g(t.querySelector("source")||t))}if("a"===t.tagName.toLowerCase()){const r=t.href;if((e=r).startsWith("data:audio")||a.test(e))return s(r)}var e;return s()}function m(t){return t.replace(/^url\(["']?/,"").replace(/["']?\)$/,"")}function g(t){let e=t.getAttribute("src")||"";const r=null==e?void 0:e.indexOf("#");return r>=0&&(e=e.substring(0,r+1)),e}function d(t,r){return[...e(t)].map(r).filter(u).filter(o)}!function(){let e=null,r=[];try{const t=d("img, a, [style]",c),e=Array.from(document.styleSheets).filter((t=>t.hasOwnProperty("cssRules"))).map((({cssRules:t})=>Array.from(t))).flat().filter((t=>t.style&&t.style.backgroundImage)).map((t=>m(t.style.backgroundImage))).filter((t=>!!t)).filter((t=>i(t))).map((t=>s(t))),n=d("video, a",l),a=d("audio, a",f);r=function(t){let e=[...new Map(t.map((t=>[t.src,t]))).values()];return e=e.filter((({src:t})=>!!t)),e}([...t,...e,...n,...a].map((t=>{return{src:(e=t.src,(null===e?null:e.startsWith("/")?`${window.location.origin}${e}`:e)||"")};var e})))}catch(t){console.log({err:t}),e=Object.assign({},t)}!function(t,e=null,r){const n=t=>{if(chrome.runtime.lastError)return null;r||(r=t=>{}),r(t)};try{chrome.runtime.sendMessage({eventName:t,data:e},n)}catch(t){}}(t.QUICK_SEND_MEDIA_FOR_DOWNLOAD,{error:e,media:r})}()})();
//# sourceMappingURL=quick_send_media.bundle.js.map