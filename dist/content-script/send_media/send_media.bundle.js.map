{"version":3,"file":"content-script/send_media/send_media.bundle.js","mappings":"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","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/utils/dom-functions.ts","webpack://media-downloader/./src/utils/crc32.ts","webpack://media-downloader/./src/utils/utils.ts","webpack://media-downloader/./src/content-script/regex-pattern.ts","webpack://media-downloader/./src/content-script/filters-fn.ts","webpack://media-downloader/./src/content-script/mappers-fn.ts","webpack://media-downloader/./src/content-script/extractors-fn.ts","webpack://media-downloader/./src/content-script/file-type-fn.ts","webpack://media-downloader/./src/content-script/send_media/send-media-mappers-fn.ts","webpack://media-downloader/./src/content-script/send_media/send_media.ts"],"sourcesContent":["export var ItemTypeEnum;\n(function (ItemTypeEnum) {\n    ItemTypeEnum[\"IMAGE\"] = \"image\";\n    ItemTypeEnum[\"AUDIO\"] = \"audio\";\n    ItemTypeEnum[\"VIDEO\"] = \"video\";\n})(ItemTypeEnum || (ItemTypeEnum = {}));\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"QUICK_SEND_MEDIA_FOR_DOWNLOAD\"] = \"quickSendMediaForDownload\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n    MessageEventNameEnum[\"THEME_CHANGED\"] = \"themeChanged\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url) {\n    const downloadOptions = { url };\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    const cb = (res) => {\n        if (chrome.runtime.lastError) {\n            // console.error('Error send msg:', chrome.runtime.lastError);\n            return null;\n        }\n        if (!callback) {\n            callback = (response) => {\n            };\n        }\n        callback(res);\n    };\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, cb);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","export function setDisabled(selector, value) {\n    q(selector).disabled = value;\n}\nexport function toggleClass(selector, className, toggleValue = null) {\n    let elements = [];\n    if (typeof selector === 'string') {\n        elements = qAll(selector);\n    }\n    else if (Array.isArray(selector)) {\n        elements = [...selector];\n    }\n    else {\n        elements = [selector];\n    }\n    if (!elements.length) {\n        return;\n    }\n    if (toggleValue === null) {\n        [...elements].forEach(element => {\n            if (element.classList.contains(className)) {\n                element.classList.remove(className);\n            }\n            else {\n                element.classList.add(className);\n            }\n        });\n    }\n    else {\n        if (toggleValue) {\n            [...elements].forEach(element => element.classList.add(className));\n        }\n        else {\n            [...elements].forEach(element => element.classList.remove(className));\n        }\n    }\n}\nexport function hasClass(selector, className) {\n    let element;\n    if (typeof selector === 'string') {\n        element = q(selector);\n    }\n    else {\n        element = selector;\n    }\n    if (!element) {\n        return false;\n    }\n    return element.classList.contains(className);\n}\nexport function createElement(tagName, props = {}, children = []) {\n    const element = document.createElement(tagName);\n    if (props.class) {\n        if (typeof props.class === 'string') {\n            element.classList.add(props.class);\n        }\n        else {\n            element.classList.add(...props.class);\n        }\n    }\n    if (props.html) {\n        element.innerHTML = props.html || '';\n    }\n    if (props.attributes) {\n        for (const [attr, value] of Object.entries(props.attributes)) {\n            element.setAttribute(attr, value);\n        }\n    }\n    if (props.data) {\n        for (const [attr, value] of Object.entries(props.data)) {\n            element.setAttribute(`data-${attr}`, value);\n        }\n    }\n    if (props.type) {\n        element.type = props.type;\n    }\n    if (props.title) {\n        element.title = props.title;\n    }\n    if (props.alt) {\n        element.alt = props.alt;\n    }\n    if (props.src) {\n        element.src = props.src;\n    }\n    if (props.href) {\n        element.href = props.href;\n    }\n    if (children) {\n        if (!Array.isArray(children) && children instanceof HTMLElement) {\n            children = [children];\n        }\n        element.append(...children);\n    }\n    return element;\n}\nexport function createDivElement(props = {}, children = []) {\n    return createElement('div', props, children);\n}\nexport function createSpanElement(props = {}, children = []) {\n    return createElement('span', props, children);\n}\nexport function createButtonElement(props = {}, children = []) {\n    props.type = 'button';\n    return createElement('button', props, children);\n}\nexport function createImgElement(props = {}) {\n    return createElement('img', props);\n}\nexport function createIconElement(name, size = 24) {\n    return createSpanElement({\n        html: name,\n        class: 'x-icon',\n        attributes: {\n            size,\n        },\n    });\n}\nexport function show(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = false;\n    }\n}\nexport function hide(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = true;\n    }\n}\nexport function qAll(selector) {\n    const data = [];\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => data.push(el));\n    return els;\n}\nexport function q(selector) {\n    return document.querySelector(selector);\n}\nexport function getInputValue(id) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (!element) {\n        return null;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"]:checked`);\n        return radioElement.value;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        return element.checked;\n    }\n    return element.value;\n}\nexport function setInputValue(id, value) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"][value=\"${value}\"]`);\n        radioElement.checked = true;\n        return;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        element.checked = value;\n        return;\n    }\n    element.value = value;\n}\n","/**\n * Tablica CRC32\n */\nconst crcTable = (() => {\n    let c;\n    const table = [];\n    for (let n = 0; n < 256; n++) {\n        c = n;\n        for (let k = 0; k < 8; k++) {\n            c = c & 1 ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1);\n        }\n        table[n] = c;\n    }\n    return table;\n})();\n/**\n * Funkcja CRC32.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {number} - Liczbowy hash CRC32.\n */\nfunction crc32(str) {\n    let crc = 0 ^ (-1);\n    for (let i = 0; i < str.length; i++) {\n        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n    return (crc ^ (-1)) >>> 0;\n}\n/**\n * Konwertuje hash CRC32 na format heksadecymalny.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {string} - Krótki hash w formacie heksadecymalnym.\n */\nexport function getCrc32Hash(str) {\n    const hash = crc32(str);\n    return hash.toString(16).padStart(8, '0'); // Upewnienie się, że ma 8 znaków\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { getCrc32Hash } from './crc32';\nimport { q } from './dom-functions';\nexport function formatTime(seconds) {\n    const sec = Math.floor(seconds % 60); // Sekundy\n    const min = Math.floor((seconds % 3600) / 60); // Minuty\n    const hrs = Math.floor(seconds / 3600); // Godziny\n    const secStr = sec < 10 ? `0${sec}` : sec; // Dodaj zero przed sekundami, jeśli mniej niż 10\n    const minStr = min < 10 ? `0${min}` : min; // Dodaj zero przed minutami, jeśli mniej niż 10\n    if (hrs > 0) {\n        return `${hrs}:${minStr}:${secStr}`; // Format hh:mm:ss\n    }\n    else {\n        return `${minStr}:${secStr}`; // Format mm:ss\n    }\n}\nexport function getQualityLabel(width) {\n    if (width >= 3840)\n        return '4K';\n    if (width >= 2560)\n        return '1440p';\n    if (width >= 1920)\n        return '1080p';\n    if (width >= 1280)\n        return '720p';\n    if (width >= 854)\n        return '480p';\n    if (width >= 640)\n        return '360p';\n    return 'SD';\n}\nexport function getUuid(val) {\n    return getCrc32Hash(val.toString());\n}\nexport function getCurrentSection() {\n    const key = q(`.section-buttons button.selected`).getAttribute('data-section');\n    return key || ItemTypeEnum.IMAGE;\n}\n","export const imageRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:bmp|gif|jpe?g|png|svg|webp))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const videoRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mkv|flv|ogg|ogv|gifv|avi|mov|wmv|rm|rmvb|mp4|m4p|m4v|mpg|mpeg|3gp|3g2|webm))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const audioRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mp3|flac|ogg|wma))(?:\\?([^#]*))?(?:#(.*))?/i;\n","import { audioRegex, imageRegex, videoRegex } from './regex-pattern';\nexport function isNotYouTubeLink({ src }) {\n    return !src.includes('https://www.youtube.com')\n        && !src.includes('https://www.youtu.be')\n        && !src.includes('https://youtube.com')\n        && !src.includes('https://youtu.be');\n}\nexport function isNotEmpty({ src }) {\n    return !!src;\n}\nexport function isImageURL(url) {\n    return url.startsWith('data:image') || imageRegex.test(url);\n}\nexport function isVideoURL(url) {\n    return url.startsWith('data:video') || videoRegex.test(url);\n}\nexport function isAudioURL(url) {\n    return url.startsWith('data:audio') || audioRegex.test(url);\n}\nexport function removeDuplicateOrEmpty(data) {\n    let result = [...new Map(data.map((item) => [item.src, item])).values()];\n    result = result.filter(({ src }) => !!src);\n    return result;\n}\n","export function relativeUrlToAbsolute(url) {\n    if (url === null) {\n        return null;\n    }\n    return url.startsWith('/') ? `${window.location.origin}${url}` : url;\n}\nexport function mapToFullInfo(src = '', altOrElement = null, poster = undefined) {\n    const info = { src, poster: null };\n    if (poster !== undefined) {\n        info.poster = poster;\n    }\n    return info;\n}\n","import { qAll } from '../utils/dom-functions';\nimport { isAudioURL, isImageURL, isNotEmpty, isNotYouTubeLink, isVideoURL } from './filters-fn';\nimport { mapToFullInfo } from './mappers-fn';\nfunction extractImageFromElement(element) {\n    if (element.tagName.toLowerCase() === 'img') {\n        const src = getSrcFromElement(element);\n        return mapToFullInfo(src);\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isImageURL(href)) {\n            return mapToFullInfo(href);\n        }\n    }\n    const backgroundImage = window.getComputedStyle(element).backgroundImage;\n    if (backgroundImage) {\n        const parsedURL = extractURLFromStyle(backgroundImage);\n        if (isImageURL(parsedURL)) {\n            return mapToFullInfo(parsedURL);\n        }\n    }\n    return mapToFullInfo();\n}\nfunction extractVideoFromElement(element) {\n    if (element.tagName.toLowerCase() === 'video') {\n        const sourceElement = element.querySelector('source');\n        const src = sourceElement\n            ? getSrcFromElement(sourceElement)\n            : getSrcFromElement(element);\n        return mapToFullInfo(src, getPosterFromVideoElement(element));\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isVideoURL(href)) {\n            return mapToFullInfo(href, null);\n        }\n    }\n    return mapToFullInfo('', null);\n}\nfunction extractAudioFromElement(element) {\n    if (element.tagName.toLowerCase() === 'audio') {\n        const sourceElement = element.querySelector('source');\n        const src = sourceElement\n            ? getSrcFromElement(sourceElement)\n            : getSrcFromElement(element);\n        return mapToFullInfo(src);\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isAudioURL(href)) {\n            return mapToFullInfo(href);\n        }\n    }\n    return mapToFullInfo();\n}\nfunction extractURLFromStyle(url) {\n    return url.replace(/^url\\([\"']?/, '').replace(/[\"']?\\)$/, '');\n}\nfunction getSrcFromElement(element) {\n    let src = element.getAttribute('src') || '';\n    const hashIndex = src === null || src === void 0 ? void 0 : src.indexOf('#');\n    if (hashIndex >= 0) {\n        src = src.substring(0, hashIndex + 1);\n    }\n    return src;\n}\nfunction getPosterFromVideoElement(element) {\n    let poster = element.getAttribute('poster')\n        || element.getAttribute('data-poster')\n        || '';\n    const hashIndex = poster === null || poster === void 0 ? void 0 : poster.indexOf('#');\n    if (hashIndex >= 0) {\n        poster = poster.substring(0, hashIndex + 1);\n    }\n    return poster;\n}\nexport function extractDataFromTags(selectors, mapFn) {\n    const elements = [...qAll(selectors)];\n    return elements.map(mapFn)\n        .filter(isNotEmpty)\n        .filter(isNotYouTubeLink);\n}\nexport function extractImagesFromTags() {\n    return extractDataFromTags('img, a, [style]', extractImageFromElement);\n}\nexport function extractVideosFromTags() {\n    return extractDataFromTags('video, a', extractVideoFromElement);\n}\nexport function extractAudiosFromTags() {\n    return extractDataFromTags('audio, a', extractAudioFromElement);\n}\nexport function extractImagesFromStyles() {\n    return Array.from(document.styleSheets)\n        .filter(styleSheet => styleSheet.hasOwnProperty('cssRules'))\n        .map(({ cssRules }) => Array.from(cssRules))\n        .flat()\n        .filter((cssRule) => cssRule.style && cssRule.style.backgroundImage)\n        .map((cssRule) => extractURLFromStyle(cssRule.style.backgroundImage))\n        .filter((url) => !!url)\n        .filter((url) => isImageURL(url))\n        .map((url) => mapToFullInfo(url));\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction getFileTypeFromBase64(base64String) {\n    const match = base64String.match(/^data:(.+);base64,/);\n    const ext = match ? match[1].split('/')[1] : null;\n    if (ext === null || ext === void 0 ? void 0 : ext.startsWith('svg+xml')) {\n        return 'svg';\n    }\n    return ext;\n}\nfunction getFileTypeFromUrl(url) {\n    let lastUrlSegment = url.split('/').pop();\n    if (!lastUrlSegment || !lastUrlSegment.includes('.')) {\n        return null;\n    }\n    lastUrlSegment = lastUrlSegment.split('?')[0];\n    const lastAfterDot = lastUrlSegment.split('.').pop();\n    if (!lastAfterDot) {\n        return null;\n    }\n    return lastAfterDot.toLowerCase().split('?')[0];\n}\nfunction getFileTypeFromUrlHeaders(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const response = yield fetch(url, { method: 'HEAD', referrer: window.location.origin });\n            const contentType = response.headers.get('Content-Type');\n            if (contentType) {\n                const type = contentType.split('/')[1];\n                if (type.startsWith('svg+xml')) {\n                    return 'svg';\n                }\n            }\n        }\n        catch (error) {\n            return 'png';\n        }\n        return null;\n    });\n}\nexport function getFileType(urlOrBase64) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (urlOrBase64 === null) {\n            return null;\n        }\n        const base64Pattern = /^data:(.+);base64,/;\n        let filetype;\n        if (base64Pattern.test(urlOrBase64)) {\n            filetype = getFileTypeFromBase64(urlOrBase64);\n        }\n        else {\n            const extension = getFileTypeFromUrl(urlOrBase64);\n            if (extension) {\n                filetype = extension;\n            }\n            else {\n                try {\n                    filetype = yield getFileTypeFromUrlHeaders(urlOrBase64);\n                }\n                catch (e) {\n                    filetype = 'png';\n                }\n            }\n        }\n        return filetype || 'png';\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getUuid } from '../../utils/utils';\nimport { getFileType } from '../file-type-fn';\nimport { removeDuplicateOrEmpty } from '../filters-fn';\nimport { relativeUrlToAbsolute } from '../mappers-fn';\nexport function mapToFinalResultArray(data, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const promises = data.map(item => mapToFinalResultItem(item, type));\n        const results = yield Promise.all(promises);\n        return removeDuplicateOrEmpty(results);\n    });\n}\nfunction mapToFinalResultItem(item, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const src = relativeUrlToAbsolute(item.src) || '';\n        let extension = null;\n        if (src.length) {\n            extension = yield getFileType(src);\n        }\n        return {\n            order: 0,\n            tabUuid: '',\n            tabId: -1,\n            itemIndex: '',\n            src,\n            extension,\n            type,\n            selected: false,\n            poster: item.poster ? relativeUrlToAbsolute(item.poster) : null,\n            uuid: item.uuid || getUuid(item.src),\n            properties: {\n                width: 0,\n                height: 0,\n                duration: 0,\n                durationStr: '',\n                quality: 'SD',\n            },\n        };\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ItemTypeEnum } from '../../types/media-in-tabs.type';\nimport { MessageEventNameEnum } from '../../types/message-event-name.enum';\nimport { sendMessage } from '../../utils/chrome-api';\nimport { createElement, createImgElement } from '../../utils/dom-functions';\nimport { formatTime, getQualityLabel } from '../../utils/utils';\nimport { extractAudiosFromTags, extractImagesFromStyles, extractImagesFromTags, extractVideosFromTags, } from '../extractors-fn';\nimport { mapToFinalResultArray } from './send-media-mappers-fn';\n(() => {\n    function sendMedia(images, audios, videos, tab, error = null) {\n        sendMessage(MessageEventNameEnum.SEND_MEDIA, {\n            error,\n            image: images,\n            audio: audios,\n            video: videos,\n            tabInfo: tab,\n        });\n    }\n    function gatherMedia(tab) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let error = null;\n            let images = [];\n            let videos = [];\n            let audios = [];\n            try {\n                const imagesFromTags = extractImagesFromTags();\n                const imagesFromStyles = extractImagesFromStyles();\n                images = yield mapToFinalResultArray([...imagesFromTags, ...imagesFromStyles], ItemTypeEnum.IMAGE);\n                const videosFromTags = extractVideosFromTags();\n                videos = yield mapToFinalResultArray(videosFromTags, ItemTypeEnum.VIDEO);\n                const audiosFromTags = extractAudiosFromTags();\n                audios = yield mapToFinalResultArray(audiosFromTags, ItemTypeEnum.AUDIO);\n            }\n            catch (err) {\n                console.log({ err });\n                error = Object.assign({}, err);\n            }\n            if (error) {\n                sendMedia([], [], [], tab, error);\n                return;\n            }\n            images.forEach((img, index) => {\n                const imgEl = createImgElement();\n                imgEl.addEventListener('load', () => {\n                    img.properties.width = imgEl.naturalWidth;\n                    img.properties.height = imgEl.naturalHeight;\n                    img.order = index;\n                    imgEl.remove();\n                    sendMedia([img], [], [], tab);\n                });\n                imgEl.src = img.src;\n            });\n            videos.forEach((video, index) => {\n                const videoEl = createElement('video');\n                videoEl.addEventListener('loadedmetadata', () => {\n                    video.properties.quality = getQualityLabel(videoEl.videoWidth);\n                    video.order = index;\n                    videoEl.remove();\n                    sendMedia([], [], [video], tab);\n                });\n                videoEl.src = video.src;\n            });\n            audios.forEach((audio, index) => {\n                const audioEl = createElement('audio');\n                audioEl.addEventListener('loadedmetadata', () => {\n                    const duration = formatTime(audioEl.duration);\n                    audio.properties.duration = audioEl.duration;\n                    audio.properties.durationStr = duration;\n                    audio.order = index;\n                    audioEl.remove();\n                    sendMedia([], [audio], [], tab);\n                });\n                audioEl.src = audio.src;\n            });\n        });\n    }\n    sendMessage(MessageEventNameEnum.GET_TAB_INFO, {}, (tab) => {\n        gatherMedia(tab);\n    });\n})();\n"],"names":["MessageEventNameEnum","ItemTypeEnum","sendMessage","eventName","data","callback","cb","res","chrome","runtime","lastError","response","_a","createElement","tagName","props","children","element","document","class","classList","add","html","innerHTML","attributes","attr","value","Object","entries","setAttribute","type","title","alt","src","href","Array","isArray","HTMLElement","append","qAll","selector","els","querySelectorAll","forEach","el","push","crcTable","c","table","n","k","getUuid","val","str","crc","i","length","charCodeAt","crc32","toString","padStart","imageRegex","videoRegex","audioRegex","isNotYouTubeLink","includes","isNotEmpty","isImageURL","url","startsWith","test","relativeUrlToAbsolute","window","location","origin","mapToFullInfo","altOrElement","poster","undefined","info","extractImageFromElement","toLowerCase","getSrcFromElement","backgroundImage","getComputedStyle","parsedURL","extractURLFromStyle","extractVideoFromElement","querySelector","getAttribute","hashIndex","indexOf","substring","getPosterFromVideoElement","extractAudioFromElement","replace","extractDataFromTags","selectors","mapFn","map","filter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","mapToFinalResultArray","this","promises","item","extension","urlOrBase64","filetype","base64String","match","ext","split","getFileTypeFromBase64","lastUrlSegment","pop","lastAfterDot","getFileTypeFromUrl","contentType","fetch","method","referrer","headers","get","error","getFileTypeFromUrlHeaders","getFileType","order","tabUuid","tabId","itemIndex","selected","uuid","properties","width","height","duration","durationStr","quality","mapToFinalResultItem","Map","values","removeDuplicateOrEmpty","all","sendMedia","images","audios","videos","tab","SEND_MEDIA","image","audio","video","tabInfo","gatherMedia","imagesFromTags","imagesFromStyles","from","styleSheets","styleSheet","hasOwnProperty","cssRules","flat","cssRule","style","IMAGE","videosFromTags","VIDEO","audiosFromTags","AUDIO","err","console","log","assign","img","index","imgEl","createImgElement","addEventListener","naturalWidth","naturalHeight","remove","videoEl","videoWidth","audioEl","seconds","sec","Math","floor","min","hrs","secStr","minStr","formatTime","GET_TAB_INFO"],"sourceRoot":""}