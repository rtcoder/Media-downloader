{"version":3,"file":"content-script/send_media/send_media.bundle.js","mappings":"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","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/utils/dom-functions.ts","webpack://media-downloader/./src/utils/crc32.ts","webpack://media-downloader/./src/utils/utils.ts","webpack://media-downloader/./src/content-script/regex-pattern.ts","webpack://media-downloader/./src/content-script/filters-fn.ts","webpack://media-downloader/./src/content-script/file-type-fn.ts","webpack://media-downloader/./src/content-script/mappers-fn.ts","webpack://media-downloader/./src/content-script/extractors-fn.ts","webpack://media-downloader/./src/content-script/send_media/send_media.ts"],"sourcesContent":["export var ItemTypeEnum;\n(function (ItemTypeEnum) {\n    ItemTypeEnum[\"IMAGE\"] = \"image\";\n    ItemTypeEnum[\"AUDIO\"] = \"audio\";\n    ItemTypeEnum[\"VIDEO\"] = \"video\";\n})(ItemTypeEnum || (ItemTypeEnum = {}));\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"QUICK_SEND_MEDIA_FOR_DOWNLOAD\"] = \"quickSendMediaForDownload\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url, filename = null) {\n    const downloadOptions = { url };\n    if (filename) {\n        downloadOptions.filename = filename;\n    }\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    if (!callback) {\n        callback = (response) => {\n        };\n    }\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, callback);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","export function setDisabled(selector, value) {\n    q(selector).disabled = value;\n}\nexport function toggleClass(selector, className, toggleValue = null) {\n    let elements = [];\n    if (typeof selector === 'string') {\n        elements = qAll(selector);\n    }\n    else if (Array.isArray(selector)) {\n        elements = [...selector];\n    }\n    else {\n        elements = [selector];\n    }\n    if (!elements.length) {\n        return;\n    }\n    if (toggleValue === null) {\n        [...elements].forEach(element => {\n            if (element.classList.contains(className)) {\n                element.classList.remove(className);\n            }\n            else {\n                element.classList.add(className);\n            }\n        });\n    }\n    else {\n        if (toggleValue) {\n            [...elements].forEach(element => element.classList.add(className));\n        }\n        else {\n            [...elements].forEach(element => element.classList.remove(className));\n        }\n    }\n}\nexport function hasClass(selector, className) {\n    let element;\n    if (typeof selector === 'string') {\n        element = q(selector);\n    }\n    else {\n        element = selector;\n    }\n    if (!element) {\n        return false;\n    }\n    return element.classList.contains(className);\n}\n/**\n * @typedef {Object} Props\n * @property {string|string[]} [class] - A string or an array of strings representing the class(es) to be added to the element.\n * @property {string} [html] - The HTML content to be set as the innerHTML of the element.\n * @property {{[key: string]: string|number}} [attributes] - An object representing additional attributes to set on the element.\n * @property {{[key: string]: string|number}} [data] - An object representing additional data attributes to set on the element.\n * @property {string} [type] - The type attribute to be set on the element (useful for elements like `input`).\n * @property {string} [title] - The title attribute to be set on the element.\n * @property {string} [alt] - The alt attribute to be set on the element.\n * @property {string} [src] - The src attribute to be set on the element.\n */\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {keyof HTMLElementTagNameMap} tagName - The name of the tag for the element to be created (e.g., 'div', 'span').\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLElement} The newly created DOM element.\n */\nexport function createElement(tagName, props = {}, children = []) {\n    const element = document.createElement(tagName);\n    if (props.class) {\n        if (typeof props.class === 'string') {\n            element.classList.add(props.class);\n        }\n        else {\n            element.classList.add(...props.class);\n        }\n    }\n    if (props.html) {\n        element.innerHTML = props.html || '';\n    }\n    if (props.attributes) {\n        for (const [attr, value] of Object.entries(props.attributes)) {\n            element.setAttribute(attr, value);\n        }\n    }\n    if (props.data) {\n        for (const [attr, value] of Object.entries(props.data)) {\n            element.setAttribute(`data-${attr}`, value);\n        }\n    }\n    if (props.type) {\n        element.type = props.type;\n    }\n    if (props.title) {\n        element.title = props.title;\n    }\n    if (props.alt) {\n        element.alt = props.alt;\n    }\n    if (props.src) {\n        element.src = props.src;\n    }\n    if (children) {\n        if (!Array.isArray(children) && children instanceof HTMLElement) {\n            children = [children];\n        }\n        element.append(...children);\n    }\n    return element;\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLDivElement} The newly created DOM element.\n */\nexport function createDivElement(props = {}, children = []) {\n    return createElement('div', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLSpanElement} The newly created DOM element.\n */\nexport function createSpanElement(props = {}, children = []) {\n    return createElement('span', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLButtonElement} The newly created DOM element.\n */\nexport function createButtonElement(props = {}, children = []) {\n    props.type = 'button';\n    return createElement('button', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @returns {HTMLImageElement} The newly created DOM element.\n */\nexport function createImgElement(props = {}) {\n    return createElement('img', props);\n}\nexport function createIconElement(name, size = 24) {\n    return createSpanElement({\n        html: name,\n        class: 'x-icon',\n        attributes: {\n            size,\n        },\n    });\n}\nexport function show(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = false;\n    }\n}\nexport function hide(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = true;\n    }\n}\nexport function qAll(selector) {\n    const data = [];\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => data.push(el));\n    return els;\n}\nexport function q(selector) {\n    return document.querySelector(selector);\n}\nexport function getInputValue(id) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (!element) {\n        return null;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"]:checked`);\n        return radioElement.value;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        return element.checked;\n    }\n    return element.value;\n}\nexport function setInputValue(id, value) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"][value=\"${value}\"]`);\n        radioElement.checked = true;\n        return;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        element.checked = value;\n        return;\n    }\n    element.value = value;\n}\n","/**\n * Tablica CRC32\n */\nconst crcTable = (() => {\n    let c;\n    const table = [];\n    for (let n = 0; n < 256; n++) {\n        c = n;\n        for (let k = 0; k < 8; k++) {\n            c = c & 1 ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1);\n        }\n        table[n] = c;\n    }\n    return table;\n})();\n/**\n * Funkcja CRC32.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {number} - Liczbowy hash CRC32.\n */\nfunction crc32(str) {\n    let crc = 0 ^ (-1);\n    for (let i = 0; i < str.length; i++) {\n        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n    return (crc ^ (-1)) >>> 0;\n}\n/**\n * Konwertuje hash CRC32 na format heksadecymalny.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {string} - Krótki hash w formacie heksadecymalnym.\n */\nexport function getCrc32Hash(str) {\n    const hash = crc32(str);\n    return hash.toString(16).padStart(8, '0'); // Upewnienie się, że ma 8 znaków\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { getCrc32Hash } from './crc32';\nimport { q } from './dom-functions';\nexport function formatTime(seconds) {\n    const sec = Math.floor(seconds % 60); // Sekundy\n    const min = Math.floor((seconds % 3600) / 60); // Minuty\n    const hrs = Math.floor(seconds / 3600); // Godziny\n    const secStr = sec < 10 ? `0${sec}` : sec; // Dodaj zero przed sekundami, jeśli mniej niż 10\n    const minStr = min < 10 ? `0${min}` : min; // Dodaj zero przed minutami, jeśli mniej niż 10\n    if (hrs > 0) {\n        return `${hrs}:${minStr}:${secStr}`; // Format hh:mm:ss\n    }\n    else {\n        return `${minStr}:${secStr}`; // Format mm:ss\n    }\n}\nexport function getQualityLabel(width) {\n    if (width >= 3840)\n        return '4K';\n    if (width >= 2560)\n        return '1440p';\n    if (width >= 1920)\n        return '1080p';\n    if (width >= 1280)\n        return '720p';\n    if (width >= 854)\n        return '480p';\n    if (width >= 640)\n        return '360p';\n    return 'SD';\n}\nexport function getUuid(val) {\n    return getCrc32Hash(val.toString());\n}\nexport function getCurrentSection() {\n    const key = q(`.section-buttons button.selected`).getAttribute('data-section');\n    return key || ItemTypeEnum.IMAGE;\n}\n","export const imageRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:bmp|gif|jpe?g|png|svg|webp))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const videoRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mkv|flv|ogg|ogv|gifv|avi|mov|wmv|rm|rmvb|mp4|m4p|m4v|mpg|mpeg|3gp|3g2|webm))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const audioRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mp3|flac|ogg|wma))(?:\\?([^#]*))?(?:#(.*))?/i;\n","import { audioRegex, imageRegex, videoRegex } from './regex-pattern';\nexport function isNotYouTubeLink({ src }) {\n    return !src.includes('https://www.youtube.com')\n        && !src.includes('https://www.youtu.be')\n        && !src.includes('https://youtube.com')\n        && !src.includes('https://youtu.be');\n}\nexport function isNotEmpty({ src }) {\n    return !!src;\n}\nexport function isImageURL(url) {\n    return url.startsWith('data:image') || imageRegex.test(url);\n}\nexport function isVideoURL(url) {\n    return url.startsWith('data:video') || videoRegex.test(url);\n}\nexport function isAudioURL(url) {\n    return url.startsWith('data:audio') || audioRegex.test(url);\n}\nexport function removeDuplicateOrEmpty(data) {\n    let result = [...new Map(data.map((item) => [item.src, item])).values()];\n    result = result.filter(({ src }) => !!src);\n    return result;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction getFileTypeFromBase64(base64String) {\n    const match = base64String.match(/^data:(.+);base64,/);\n    const ext = match ? match[1].split('/')[1] : null;\n    if (ext === null || ext === void 0 ? void 0 : ext.startsWith('svg+xml')) {\n        return 'svg';\n    }\n    return ext;\n}\nfunction getFileTypeFromUrl(url) {\n    let lastUrlSegment = url.split('/').pop();\n    if (!lastUrlSegment || !lastUrlSegment.includes('.')) {\n        return null;\n    }\n    lastUrlSegment = lastUrlSegment.split('?')[0];\n    const lastAfterDot = lastUrlSegment.split('.').pop();\n    if (!lastAfterDot) {\n        return null;\n    }\n    return lastAfterDot.toLowerCase().split('?')[0];\n}\nfunction getFileTypeFromUrlHeaders(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const response = yield fetch(url, { method: 'HEAD', referrer: window.location.origin });\n            const contentType = response.headers.get('Content-Type');\n            if (contentType) {\n                const type = contentType.split('/')[1];\n                if (type.startsWith('svg+xml')) {\n                    return 'svg';\n                }\n            }\n        }\n        catch (error) {\n            return 'png';\n        }\n        return null;\n    });\n}\nexport function getFileType(urlOrBase64) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (urlOrBase64 === null) {\n            return null;\n        }\n        const base64Pattern = /^data:(.+);base64,/;\n        let filetype;\n        if (base64Pattern.test(urlOrBase64)) {\n            filetype = getFileTypeFromBase64(urlOrBase64);\n        }\n        else {\n            const extension = getFileTypeFromUrl(urlOrBase64);\n            if (extension) {\n                filetype = extension;\n            }\n            else {\n                try {\n                    filetype = yield getFileTypeFromUrlHeaders(urlOrBase64);\n                }\n                catch (e) {\n                    filetype = 'png';\n                }\n            }\n        }\n        return filetype || 'png';\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getUuid } from '../utils/utils';\nimport { getAltFromElement } from './extractors-fn';\nimport { getFileType } from './file-type-fn';\nimport { removeDuplicateOrEmpty } from './filters-fn';\nexport function relativeUrlToAbsolute(url) {\n    if (url === null) {\n        return null;\n    }\n    return url.startsWith('/') ? `${window.location.origin}${url}` : url;\n}\nexport function mapToFullInfo(src = '', altOrElement = null, poster = undefined) {\n    let alt = null;\n    if (altOrElement !== null) {\n        if (typeof altOrElement !== 'string') {\n            alt = getAltFromElement(altOrElement);\n        }\n    }\n    const info = { src, alt };\n    if (poster !== undefined) {\n        info.poster = poster;\n    }\n    return info;\n}\nexport function mapToFinalResultArray(data, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const promises = data.map(item => mapToFinalResultItem(item, type));\n        const results = yield Promise.all(promises);\n        return removeDuplicateOrEmpty(results);\n    });\n}\nfunction mapToFinalResultItem(item, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const src = relativeUrlToAbsolute(item.src) || '';\n        let extension = null;\n        if (src.length) {\n            extension = yield getFileType(src);\n        }\n        return {\n            tabUuid: '',\n            tabId: -1,\n            itemIndex: '',\n            src,\n            extension,\n            type,\n            alt: item.alt,\n            selected: false,\n            poster: item.poster ? relativeUrlToAbsolute(item.poster) : null,\n            uuid: item.uuid || getUuid(item.src),\n            properties: {\n                width: 0,\n                height: 0,\n                duration: 0,\n                durationStr: '',\n                quality: 'SD',\n            },\n        };\n    });\n}\n","import { qAll } from '../utils/dom-functions';\nimport { isAudioURL, isImageURL, isNotEmpty, isNotYouTubeLink, isVideoURL } from './filters-fn';\nimport { mapToFullInfo } from './mappers-fn';\nfunction extractImageFromElement(element) {\n    if (element.tagName.toLowerCase() === 'img') {\n        const src = getSrcFromElement(element);\n        return mapToFullInfo(src, element);\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isImageURL(href)) {\n            return mapToFullInfo(href, element);\n        }\n    }\n    const backgroundImage = window.getComputedStyle(element).backgroundImage;\n    if (backgroundImage) {\n        const parsedURL = extractURLFromStyle(backgroundImage);\n        if (isImageURL(parsedURL)) {\n            return mapToFullInfo(parsedURL);\n        }\n    }\n    return mapToFullInfo();\n}\nfunction extractVideoFromElement(element) {\n    if (element.tagName.toLowerCase() === 'video') {\n        const sourceElement = element.querySelector('source');\n        const src = sourceElement\n            ? getSrcFromElement(sourceElement)\n            : getSrcFromElement(element);\n        return mapToFullInfo(src, element, getPosterFromVideoElement(element));\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isVideoURL(href)) {\n            return mapToFullInfo(href, element, null);\n        }\n    }\n    return mapToFullInfo('', null, null);\n}\nfunction extractAudioFromElement(element) {\n    if (element.tagName.toLowerCase() === 'audio') {\n        const sourceElement = element.querySelector('source');\n        const src = sourceElement\n            ? getSrcFromElement(sourceElement)\n            : getSrcFromElement(element);\n        return mapToFullInfo(src, element);\n    }\n    if (element.tagName.toLowerCase() === 'a') {\n        const href = element.href;\n        if (isAudioURL(href)) {\n            return mapToFullInfo(href, element);\n        }\n    }\n    return mapToFullInfo();\n}\nfunction extractURLFromStyle(url) {\n    return url.replace(/^url\\([\"']?/, '').replace(/[\"']?\\)$/, '');\n}\nfunction getSrcFromElement(element) {\n    let src = element.getAttribute('src') || '';\n    const hashIndex = src === null || src === void 0 ? void 0 : src.indexOf('#');\n    if (hashIndex >= 0) {\n        src = src.substring(0, hashIndex + 1);\n    }\n    return src;\n}\nexport function getAltFromElement(element) {\n    const alt = element.getAttribute('alt');\n    if (!alt) {\n        return null;\n    }\n    if (alt.length === 0) {\n        return null;\n    }\n    return alt;\n}\nfunction getPosterFromVideoElement(element) {\n    let poster = element.getAttribute('poster')\n        || element.getAttribute('data-poster')\n        || '';\n    const hashIndex = poster === null || poster === void 0 ? void 0 : poster.indexOf('#');\n    if (hashIndex >= 0) {\n        poster = poster.substring(0, hashIndex + 1);\n    }\n    return poster;\n}\nexport function extractDataFromTags(selectors, mapFn) {\n    const elements = [...qAll(selectors)];\n    return elements.map(mapFn)\n        .filter(isNotEmpty)\n        .filter(isNotYouTubeLink);\n}\nexport function extractImagesFromTags() {\n    return extractDataFromTags('img, a, [style]', extractImageFromElement);\n}\nexport function extractVideosFromTags() {\n    return extractDataFromTags('video, a', extractVideoFromElement);\n}\nexport function extractAudiosFromTags() {\n    return extractDataFromTags('audio, a', extractAudioFromElement);\n}\nexport function extractImagesFromStyles() {\n    return Array.from(document.styleSheets)\n        .filter(styleSheet => styleSheet.hasOwnProperty('cssRules'))\n        .map(({ cssRules }) => Array.from(cssRules))\n        .flat()\n        .filter((cssRule) => cssRule.style && cssRule.style.backgroundImage)\n        .map((cssRule) => extractURLFromStyle(cssRule.style.backgroundImage))\n        .filter((url) => !!url)\n        .filter((url) => isImageURL(url))\n        .map((url) => mapToFullInfo(url));\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ItemTypeEnum } from '../../types/media-in-tabs.type';\nimport { MessageEventNameEnum } from '../../types/message-event-name.enum';\nimport { sendMessage } from '../../utils/chrome-api';\nimport { createElement, createImgElement } from '../../utils/dom-functions';\nimport { formatTime, getQualityLabel } from '../../utils/utils';\nimport { extractAudiosFromTags, extractImagesFromStyles, extractImagesFromTags, extractVideosFromTags, } from '../extractors-fn';\nimport { mapToFinalResultArray } from '../mappers-fn';\n(() => {\n    function sendMedia(images, audios, videos, tab, error = null) {\n        sendMessage(MessageEventNameEnum.SEND_MEDIA, {\n            error,\n            image: images,\n            audio: audios,\n            video: videos,\n            tabInfo: tab,\n        });\n    }\n    function gatherMedia(tab) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let error = null;\n            let images = [];\n            let videos = [];\n            let audios = [];\n            try {\n                const imagesFromTags = extractImagesFromTags();\n                const imagesFromStyles = extractImagesFromStyles();\n                images = yield mapToFinalResultArray([...imagesFromTags, ...imagesFromStyles], ItemTypeEnum.IMAGE);\n                const videosFromTags = extractVideosFromTags();\n                videos = yield mapToFinalResultArray(videosFromTags, ItemTypeEnum.VIDEO);\n                const audiosFromTags = extractAudiosFromTags();\n                audios = yield mapToFinalResultArray(audiosFromTags, ItemTypeEnum.AUDIO);\n            }\n            catch (err) {\n                console.log({ err });\n                error = Object.assign({}, err);\n            }\n            if (error) {\n                sendMedia([], [], [], tab, error);\n                return;\n            }\n            images.forEach(img => {\n                const imgEl = createImgElement();\n                imgEl.addEventListener('load', () => {\n                    img.properties.width = imgEl.naturalWidth;\n                    img.properties.height = imgEl.naturalHeight;\n                    imgEl.remove();\n                    sendMedia([img], [], [], tab);\n                });\n                imgEl.src = img.src;\n            });\n            videos.forEach(video => {\n                const videoEl = createElement('video');\n                videoEl.addEventListener('loadedmetadata', () => {\n                    video.properties.quality = getQualityLabel(videoEl.videoWidth);\n                    videoEl.remove();\n                    sendMedia([], [], [video], tab);\n                });\n                videoEl.src = video.src;\n            });\n            audios.forEach(audio => {\n                const audioEl = createElement('audio');\n                audioEl.addEventListener('loadedmetadata', () => {\n                    const duration = formatTime(audioEl.duration);\n                    audio.properties.duration = audioEl.duration;\n                    audio.properties.durationStr = duration;\n                    audioEl.remove();\n                    sendMedia([], [audio], [], tab);\n                });\n                audioEl.src = audio.src;\n            });\n        });\n    }\n    sendMessage(MessageEventNameEnum.GET_TAB_INFO, {}, (tab) => {\n        gatherMedia(tab);\n    });\n})();\n"],"names":["MessageEventNameEnum","ItemTypeEnum","sendMessage","eventName","data","callback","response","chrome","runtime","_a","createElement","tagName","props","children","element","document","class","classList","add","html","innerHTML","attributes","attr","value","Object","entries","setAttribute","type","title","alt","src","Array","isArray","HTMLElement","append","qAll","selector","els","querySelectorAll","forEach","el","push","crcTable","c","table","n","k","getUuid","val","str","crc","i","length","charCodeAt","crc32","toString","padStart","imageRegex","videoRegex","audioRegex","isNotYouTubeLink","includes","isNotEmpty","isImageURL","url","startsWith","test","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","relativeUrlToAbsolute","window","location","origin","mapToFullInfo","altOrElement","poster","undefined","getAttribute","getAltFromElement","info","mapToFinalResultArray","this","promises","map","item","extension","urlOrBase64","filetype","base64String","match","ext","split","getFileTypeFromBase64","lastUrlSegment","pop","lastAfterDot","toLowerCase","getFileTypeFromUrl","contentType","fetch","method","referrer","headers","get","error","getFileTypeFromUrlHeaders","getFileType","tabUuid","tabId","itemIndex","selected","uuid","properties","width","height","duration","durationStr","quality","mapToFinalResultItem","Map","values","filter","removeDuplicateOrEmpty","all","extractImageFromElement","getSrcFromElement","href","backgroundImage","getComputedStyle","parsedURL","extractURLFromStyle","extractVideoFromElement","querySelector","hashIndex","indexOf","substring","getPosterFromVideoElement","extractAudioFromElement","replace","extractDataFromTags","selectors","mapFn","sendMedia","images","audios","videos","tab","SEND_MEDIA","image","audio","video","tabInfo","gatherMedia","imagesFromTags","imagesFromStyles","from","styleSheets","styleSheet","hasOwnProperty","cssRules","flat","cssRule","style","IMAGE","videosFromTags","VIDEO","audiosFromTags","AUDIO","err","console","log","assign","img","imgEl","createImgElement","addEventListener","naturalWidth","naturalHeight","remove","videoEl","videoWidth","audioEl","seconds","sec","Math","floor","min","hrs","secStr","minStr","formatTime","GET_TAB_INFO"],"sourceRoot":""}