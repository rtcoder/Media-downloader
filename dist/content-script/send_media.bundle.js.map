{"version":3,"file":"content-script/send_media.bundle.js","mappings":"mBAAO,IAAI,ECAAA,EDCAC,EE+EJ,SAASC,EAAYC,EAAWC,EAAO,KAAMC,GAC3CA,IACDA,EAAYC,IAAD,GAGf,IACIC,OAAOC,QAAQN,YAAY,CAAEC,YAAWC,QAAQC,EACpD,CACA,MAAOI,GAEP,CACJ,CCvBO,SAASC,EAAcC,EAASC,EAAQ,CAAC,EAAGC,EAAW,IAC1D,MAAMC,EAAUC,SAASL,cAAcC,GAYvC,GAXIC,EAAMI,QACqB,iBAAhBJ,EAAMI,MACbF,EAAQG,UAAUC,IAAIN,EAAMI,OAG5BF,EAAQG,UAAUC,OAAON,EAAMI,QAGnCJ,EAAMO,OACNL,EAAQM,UAAYR,EAAMO,MAAQ,IAElCP,EAAMS,WACN,IAAK,MAAOC,EAAMC,KAAUC,OAAOC,QAAQb,EAAMS,YAC7CP,EAAQY,aAAaJ,EAAMC,GAGnC,GAAIX,EAAMR,KACN,IAAK,MAAOkB,EAAMC,KAAUC,OAAOC,QAAQb,EAAMR,MAC7CU,EAAQY,aAAa,QAAQJ,IAAQC,GAqB7C,OAlBIX,EAAMe,OACNb,EAAQa,KAAOf,EAAMe,MAErBf,EAAMgB,QACNd,EAAQc,MAAQhB,EAAMgB,OAEtBhB,EAAMiB,MACNf,EAAQe,IAAMjB,EAAMiB,KAEpBjB,EAAMkB,MACNhB,EAAQgB,IAAMlB,EAAMkB,KAEpBjB,KACKkB,MAAMC,QAAQnB,IAAaA,aAAoBoB,cAChDpB,EAAW,CAACA,IAEhBC,EAAQoB,UAAUrB,IAEfC,CACX,CAkEO,SAASqB,EAAKC,GACjB,MAAMhC,EAAO,GACPiC,EAAMtB,SAASuB,iBAAiBF,GAEtC,OADAC,EAAIE,SAASC,GAAOpC,EAAKqC,KAAKD,KACvBH,CACX,EHpLWpC,EAIR,IAAiB,EAAe,CAAC,IAHZ,MAAI,QACxBA,EAAoB,MAAI,QACxBA,EAAoB,MAAI,QCH5B,SAAWD,GACPA,EAAkC,YAAI,aACtCA,EAAmC,aAAI,cACvCA,EAAkC,YAAI,aACtCA,EAAoC,cAAI,eACxCA,EAAiC,WAAI,YACrCA,EAAmC,aAAI,YAC1C,CAPD,CAOGA,IAAyBA,EAAuB,CAAC,IGLpD,MAAM0C,EAAW,MACb,IAAIC,EACJ,MAAMC,EAAQ,GACd,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1BF,EAAIE,EACJ,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACnBH,EAAQ,EAAJA,EAAS,WAAcA,IAAM,EAAOA,IAAM,EAElDC,EAAMC,GAAKF,CACf,CACA,OAAOC,CACV,EAXgB,GC4BV,SAASG,EAAQC,GACpB,ODZJ,SAAeC,GACX,IAAIC,GAAM,EACV,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAIG,OAAQD,IAC5BD,EAAOA,IAAQ,EAAKR,EAAqC,KAA3BQ,EAAMD,EAAII,WAAWF,KAEvD,OAAQD,IAAgB,CAC5B,CAOiBI,CCDON,EAAIO,YDEZA,SAAS,IAAIC,SAAS,EAAG,ICDzC,CCjCO,MAAMC,EAAa,wGACbC,EAAa,wJACbC,EAAa,8FCDnB,SAASC,GAAiB,IAAE9B,IAC/B,QAAQA,EAAI+B,SAAS,4BACb/B,EAAI+B,SAAS,yBACb/B,EAAI+B,SAAS,wBACb/B,EAAI+B,SAAS,oBACzB,CACO,SAASC,GAAW,IAAEhC,IACzB,QAASA,CACb,CACO,SAASiC,EAAWC,GACvB,OAAOA,EAAIC,WAAW,eAAiBR,EAAWS,KAAKF,EAC3D,CCZA,IAAI,EAAwC,SAAUG,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnD,GAAS,IAAMoD,EAAKL,EAAUM,KAAKrD,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASvD,GAAS,IAAMoD,EAAKL,EAAiB,MAAE/C,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAexD,EAIawD,EAAOC,KAAOR,EAAQO,EAAOxD,QAJ1CA,EAIyDwD,EAAOxD,MAJhDA,aAAiB8C,EAAI9C,EAAQ,IAAI8C,GAAE,SAAUG,GAAWA,EAAQjD,EAAQ,KAIjB0D,KAAKP,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,OAClE,GACJ,ECKO,SAASO,EAAsBnB,GAClC,OAAY,OAARA,EACO,KAEJA,EAAIC,WAAW,KAAO,GAAGmB,OAAOC,SAASC,SAAStB,IAAQA,CACrE,CACO,SAASuB,IACZ,OApBkDpB,EAoBjCqB,KApB0CpB,EAoBpCqB,UApBmDnB,EAoBhC,UAAWxC,EAAM,GAAI4D,EAAe,KAAMC,OAASC,GACzF,IAAIC,EAAY,KACZ/D,EAAIsB,SACJyC,QDwBL,SAAqBC,GACxB,OAAO,EAAUN,UAAM,OAAQ,GAAQ,YACnC,GAAoB,OAAhBM,EACA,OAAO,KAGX,IAAIC,EACJ,GAFsB,qBAEJ7B,KAAK4B,GACnBC,EA9CZ,SAA+BC,GAC3B,MAAMC,EAAQD,EAAaC,MAAM,sBAC3BC,EAAMD,EAAQA,EAAM,GAAGE,MAAM,KAAK,GAAK,KAC7C,OAAID,aAAiC,EAASA,EAAIjC,WAAW,YAClD,MAEJiC,CACX,CAuCuBE,CAAsBN,OAEhC,CACD,MAAMD,EAzClB,SAA4B7B,GACxB,IAAIqC,EAAiBrC,EAAImC,MAAM,KAAKG,MACpC,IAAKD,IAAmBA,EAAexC,SAAS,KAC5C,OAAO,KAEXwC,EAAiBA,EAAeF,MAAM,KAAK,GAC3C,MAAMI,EAAeF,EAAeF,MAAM,KAAKG,MAC/C,OAAKC,EAGEA,EAAaC,cAAcL,MAAM,KAAK,GAFlC,IAGf,CA8B8BM,CAAmBX,GACrC,GAAID,EACAE,EAAWF,OAGX,IACIE,QAnCpB,SAAmC/B,GAC/B,OAAO,EAAUwB,UAAM,OAAQ,GAAQ,YACnC,IACI,MACMkB,SADiBC,MAAM3C,EAAK,CAAE4C,OAAQ,OAAQC,SAAUzB,OAAOC,SAASC,UACjDwB,QAAQC,IAAI,gBACzC,GAAIL,GACaA,EAAYP,MAAM,KAAK,GAC3BlC,WAAW,WAChB,MAAO,KAGnB,CACA,MAAO+C,GACH,MAAO,KACX,CACA,OAAO,IACX,GACJ,CAkBqCC,CAA0BnB,EAC/C,CACA,MAAOjB,GACHkB,EAAW,KACf,CAER,CACA,OAAOA,GAAY,KACvB,GACJ,CClD8BmB,CAAYpF,IAElC,IAAID,EAAM,KACW,OAAjB6D,GAC4B,iBAAjBA,IACP7D,ECqDT,SAA2Bf,GAC9B,MAAMe,EAAMf,EAAQqG,aAAa,OACjC,OAAKtF,EAGc,IAAfA,EAAIuB,OACG,KAEJvB,EALI,IAMf,CD9DsBuF,CAAkB1B,IAGhC,MAAM2B,EAAO,CAAEvF,MAAKD,MAAKgE,aAIzB,YAHeD,IAAXD,IACA0B,EAAK1B,OAASA,GAEX0B,CACX,EAlCO,KAFgEhD,OAoBrC,KAlBhBA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnD,GAAS,IAAMoD,EAAKL,EAAUM,KAAKrD,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASvD,GAAS,IAAMoD,EAAKL,EAAiB,MAAE/C,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAexD,EAIawD,EAAOC,KAAOR,EAAQO,EAAOxD,QAJ1CA,EAIyDwD,EAAOxD,MAJhDA,aAAiB8C,EAAI9C,EAAQ,IAAI8C,GAAE,SAAUG,GAAWA,EAAQjD,EAAQ,KAIjB0D,KAAKP,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,OAClE,IAPwC,IAAUT,EAASC,EAAYC,EAAGC,CAqC9E,CACO,SAASgD,EAAsBlH,EAAMuB,GACxC,OFpBG,SAAgCvB,GACnC,IAAI2E,EAAS,IAAI,IAAIwC,IAAInH,EAAKoH,KAAKC,GAAS,CAACA,EAAK3F,IAAK2F,MAAQC,UAE/D,OADA3C,EAASA,EAAO4C,QAAO,EAAG7F,WAAYA,IAC/BiD,CACX,CEgBW6C,CAAuBxH,EAAKoH,KAAIC,GAE3C,SAA8BA,EAAM9F,GAChC,MAAO,CACHkG,QAAS,GACTC,OAAQ,EACRC,UAAW,GACXjG,IAAKqD,EAAsBsC,EAAK3F,MAAQ,GACxC+D,UAAW4B,EAAK5B,UAChBlE,OACAE,IAAK4F,EAAK5F,IACVmG,UAAU,EACVrC,OAAQ8B,EAAK9B,OAASR,EAAsBsC,EAAK9B,QAAU,KAC3DsC,KAAMR,EAAKQ,MAAQlF,EAAQ0E,EAAK3F,KAChCoG,WAAY,CACRC,MAAO,EACPC,OAAQ,EACRC,SAAU,EACVC,YAAa,GACbC,QAAS,MAGrB,CAtBmDC,CAAqBf,EAAM9F,KAC9E,CCxCA,IAAI,EAAwC,SAAUwC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnD,GAAS,IAAMoD,EAAKL,EAAUM,KAAKrD,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASvD,GAAS,IAAMoD,EAAKL,EAAiB,MAAE/C,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAexD,EAIawD,EAAOC,KAAOR,EAAQO,EAAOxD,QAJ1CA,EAIyDwD,EAAOxD,MAJhDA,aAAiB8C,EAAI9C,EAAQ,IAAI8C,GAAE,SAAUG,GAAWA,EAAQjD,EAAQ,KAIjB0D,KAAKP,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,OAClE,GACJ,EAIA,SAAS6D,EAAwB3H,GAC7B,OAAO,EAAU0E,UAAM,OAAQ,GAAQ,YACnC,GAAsC,QAAlC1E,EAAQH,QAAQ6F,cAEhB,OAAOjB,EADKmD,EAAkB5H,GACJA,GAE9B,GAAsC,MAAlCA,EAAQH,QAAQ6F,cAAuB,CACvC,MAAMmC,EAAO7H,EAAQ6H,KACrB,GAAI5E,EAAW4E,GACX,OAAOpD,EAAcoD,EAAM7H,EAEnC,CACA,MAAM8H,EAAkBxD,OAAOyD,iBAAiB/H,GAAS8H,gBACzD,GAAIA,EAAiB,CACjB,MAAME,EAAYC,EAAoBH,GACtC,GAAI7E,EAAW+E,GACX,OAAOvD,EAAcuD,EAE7B,CACA,OAAOvD,GACX,GACJ,CACA,SAASyD,EAAwBlI,GAC7B,OAAO,EAAU0E,UAAM,OAAQ,GAAQ,YACnC,GAAsC,UAAlC1E,EAAQH,QAAQ6F,cAA2B,CAK3C,OAAOjB,EAFDmD,EAFgB5H,EAAQmI,cAAc,WAGpBnI,GACEA,EAkDtC,SAAmCA,GAC/B,IAAI6E,EAAS7E,EAAQqG,aAAa,WAC3BrG,EAAQqG,aAAa,gBACrB,GACP,MAAM+B,EAAYvD,aAAuC,EAASA,EAAOwD,QAAQ,KAIjF,OAHID,GAAa,IACbvD,EAASA,EAAOyD,UAAU,EAAGF,EAAY,IAEtCvD,CACX,CA3D+C0D,CAA0BvI,GACjE,CACA,GAAsC,MAAlCA,EAAQH,QAAQ6F,cAAuB,CACvC,MAAMmC,EAAO7H,EAAQ6H,KACrB,IHhCe3E,EGgCA2E,GH/BZ1E,WAAW,eAAiBP,EAAWQ,KAAKF,GGgC3C,OAAOuB,EAAcoD,EAAM7H,EAAS,KAE5C,CHnCD,IAAoBkD,EGoCnB,OAAOuB,EAAc,GAAI,KAAM,KACnC,GACJ,CACA,SAAS+D,EAAwBxI,GAC7B,OAAO,EAAU0E,UAAM,OAAQ,GAAQ,YACnC,GAAsC,UAAlC1E,EAAQH,QAAQ6F,cAA2B,CAK3C,OAAOjB,EAFDmD,EAFgB5H,EAAQmI,cAAc,WAGpBnI,GACEA,EAC9B,CACA,GAAsC,MAAlCA,EAAQH,QAAQ6F,cAAuB,CACvC,MAAMmC,EAAO7H,EAAQ6H,KACrB,IH/Ce3E,EG+CA2E,GH9CZ1E,WAAW,eAAiBN,EAAWO,KAAKF,GG+C3C,OAAOuB,EAAcoD,EAAM7H,EAEnC,CHlDD,IAAoBkD,EGmDnB,OAAOuB,GACX,GACJ,CACA,SAASwD,EAAoB/E,GACzB,OAAOA,EAAIuF,QAAQ,cAAe,IAAIA,QAAQ,WAAY,GAC9D,CACA,SAASb,EAAkB5H,GACvB,IAAIgB,EAAMhB,EAAQqG,aAAa,QAAU,GACzC,MAAM+B,EAAYpH,aAAiC,EAASA,EAAIqH,QAAQ,KAIxE,OAHID,GAAa,IACbpH,EAAMA,EAAIsH,UAAU,EAAGF,EAAY,IAEhCpH,CACX,CAqBO,SAAS0H,EAAoBC,EAAWC,GAC3C,OAAO,EAAUlE,UAAM,OAAQ,GAAQ,YACnC,MACMmE,EADW,IAAIxH,EAAKsH,IACAjC,IAAIkC,GAE9B,aADsBnF,QAAQqF,IAAID,IAE7BhC,OAAO7D,GACP6D,OAAO/D,EAChB,GACJ,CC9FA,MACI,SAASiG,EAAUC,EAAQC,EAAQC,EAAQC,EAAKjD,EAAQ,MACpD9G,EAAYF,EAAqBkK,WAAY,CACzClD,QACAmD,MAAOL,EACPM,MAAOL,EACPM,MAAOL,EACPM,QAASL,GAEjB,CACA,SAASM,EAAYN,GACjB,OA3B8C9F,EA2B7BqB,KA3BsCpB,OA2BhC,EA3B+CE,EA2B/B,YACnC,IAAI0C,EAAQ,KACR8C,EAAS,GACTE,EAAS,GACTD,EAAS,GACb,IACI,MAAMS,QD8Ef,WACH,OAAO,EAAUhF,UAAM,OAAQ,GAAQ,YACnC,OAAOgE,EAAoB,kBAAmBf,EAClD,GACJ,CClF6CgC,GACvBC,QD6FXnG,QAAQqF,IAAI7H,MAAM4I,KAAK5J,SAAS6J,aAClCjD,QAAOkD,GAAcA,EAAWC,eAAe,cAC/CtD,KAAI,EAAGuD,cAAehJ,MAAM4I,KAAKI,KACjCC,OACArD,QAAQsD,GAAYA,EAAQC,OAASD,EAAQC,MAAMtC,kBACnDpB,KAAKyD,GAAYlC,EAAoBkC,EAAQC,MAAMtC,mBACnDjB,QAAQ3D,KAAUA,IAClB2D,QAAQ3D,GAAQD,EAAWC,KAC3BwD,KAAKxD,GAAQuB,EAAcvB,MCpGpB8F,EAASxC,EAAsB,IAAIkD,KAAmBE,GAAmB,EAAaS,OAEtFnB,EAAS1C,QD+ElB,WACH,OAAO,EAAU9B,UAAM,OAAQ,GAAQ,YACnC,OAAOgE,EAAoB,WAAYR,EAC3C,GACJ,CCpF6CoC,GACkB,EAAaC,OAE5DtB,EAASzC,QDkFlB,WACH,OAAO,EAAU9B,UAAM,OAAQ,GAAQ,YACnC,OAAOgE,EAAoB,WAAYF,EAC3C,GACJ,CCvF6CgC,GACkB,EAAaC,MAChE,CACA,MAAOC,GACHC,QAAQC,IAAI,CAAEF,QACdxE,EAAQxF,OAAOmK,OAAO,CAAC,EAAGH,EAC9B,CACIxE,EACA6C,EAAU,GAAI,GAAI,GAAII,EAAKjD,IAG/B8C,EAAOvH,SAAQqJ,IACX,MAAMC,ERkGf,SAA0BjL,EAAQ,CAAC,GACtC,OAAOF,EAAc,MAAOE,EAChC,CQpG8BkL,GACdD,EAAME,iBAAiB,QAAQ,KAC3BH,EAAI1D,WAAWC,MAAQ0D,EAAMG,aAC7BJ,EAAI1D,WAAWE,OAASyD,EAAMI,cAC9BJ,EAAMK,SACNrC,EAAU,CAAC+B,GAAM,GAAI,GAAI3B,EAAI,IAEjC4B,EAAM/J,IAAM8J,EAAI9J,GAAG,IAEvBkI,EAAOzH,SAAQ8H,IACX,MAAM8B,EAAUzL,EAAc,SAC9ByL,EAAQJ,iBAAiB,kBAAkB,KN7CpD,IAAyB5D,EM8CZkC,EAAMnC,WAAWK,SN9CLJ,EM8C+BgE,EAAQC,aN7CtD,KACF,KACPjE,GAAS,KACF,QACPA,GAAS,KACF,QACPA,GAAS,KACF,OACPA,GAAS,IACF,OACPA,GAAS,IACF,OACJ,KMkCSgE,EAAQD,SACRrC,EAAU,GAAI,GAAI,CAACQ,GAAQJ,EAAI,IAEnCkC,EAAQrK,IAAMuI,EAAMvI,GAAG,IAE3BiI,EAAOxH,SAAQ6H,IACX,MAAMiC,EAAU3L,EAAc,SAC9B2L,EAAQN,iBAAiB,kBAAkB,KACvC,MAAM1D,ENpEnB,SAAoBiE,GACvB,MAAMC,EAAMC,KAAKC,MAAMH,EAAU,IAC3BI,EAAMF,KAAKC,MAAOH,EAAU,KAAQ,IACpCK,EAAMH,KAAKC,MAAMH,EAAU,MAC3BM,EAASL,EAAM,GAAK,IAAIA,IAAQA,EAChCM,EAASH,EAAM,GAAK,IAAIA,IAAQA,EACtC,OAAIC,EAAM,EACC,GAAGA,KAAOE,KAAUD,IAGpB,GAAGC,KAAUD,GAE5B,CMwDqCE,CAAWT,EAAQhE,UACpC+B,EAAMlC,WAAWG,SAAWgE,EAAQhE,SACpC+B,EAAMlC,WAAWI,YAAcD,EAC/BgE,EAAQH,SACRrC,EAAU,GAAI,CAACO,GAAQ,GAAIH,EAAI,IAEnCoC,EAAQvK,IAAMsI,EAAMtI,GAAG,IAE/B,EA7EG,KAFgEuC,OA2BpC,KAzBjBA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnD,GAAS,IAAMoD,EAAKL,EAAUM,KAAKrD,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASvD,GAAS,IAAMoD,EAAKL,EAAiB,MAAE/C,GAAS,CAAE,MAAOsD,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAexD,EAIawD,EAAOC,KAAOR,EAAQO,EAAOxD,QAJ1CA,EAIyDwD,EAAOxD,MAJhDA,aAAiB8C,EAAI9C,EAAQ,IAAI8C,GAAE,SAAUG,GAAWA,EAAQjD,EAAQ,KAIjB0D,KAAKP,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,OAClE,IAPwC,IAAUT,EAASC,EAAYC,EAAGC,CAgF1E,CACApE,EAAYF,EAAqB+M,aAAc,CAAC,GAAI9C,IAChDM,EAAYN,EAAI,GAEvB,EApED,E","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/utils/dom-functions.ts","webpack://media-downloader/./src/utils/crc32.ts","webpack://media-downloader/./src/utils/utils.ts","webpack://media-downloader/./src/content-script/regex-pattern.ts","webpack://media-downloader/./src/content-script/filters-fn.ts","webpack://media-downloader/./src/content-script/file-type-fn.ts","webpack://media-downloader/./src/content-script/mappers-fn.ts","webpack://media-downloader/./src/content-script/extractors-fn.ts","webpack://media-downloader/./src/content-script/send_media.ts"],"sourcesContent":["export var ItemTypeEnum;\n(function (ItemTypeEnum) {\n    ItemTypeEnum[\"IMAGE\"] = \"image\";\n    ItemTypeEnum[\"AUDIO\"] = \"audio\";\n    ItemTypeEnum[\"VIDEO\"] = \"video\";\n})(ItemTypeEnum || (ItemTypeEnum = {}));\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url, filename = null) {\n    const downloadOptions = { url };\n    if (filename) {\n        downloadOptions.filename = filename;\n    }\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    if (!callback) {\n        callback = (response) => {\n        };\n    }\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, callback);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","export function setDisabled(selector, value) {\n    q(selector).disabled = value;\n}\nexport function toggleClass(selector, className, toggleValue = null) {\n    let elements = [];\n    if (typeof selector === 'string') {\n        elements = qAll(selector);\n    }\n    else if (Array.isArray(selector)) {\n        elements = [...selector];\n    }\n    else {\n        elements = [selector];\n    }\n    if (!elements.length) {\n        return;\n    }\n    if (toggleValue === null) {\n        [...elements].forEach(element => {\n            if (element.classList.contains(className)) {\n                element.classList.remove(className);\n            }\n            else {\n                element.classList.add(className);\n            }\n        });\n    }\n    else {\n        if (toggleValue) {\n            [...elements].forEach(element => element.classList.add(className));\n        }\n        else {\n            [...elements].forEach(element => element.classList.remove(className));\n        }\n    }\n}\nexport function hasClass(selector, className) {\n    let element;\n    if (typeof selector === 'string') {\n        element = q(selector);\n    }\n    else {\n        element = selector;\n    }\n    if (!element) {\n        return false;\n    }\n    return element.classList.contains(className);\n}\n/**\n * @typedef {Object} Props\n * @property {string|string[]} [class] - A string or an array of strings representing the class(es) to be added to the element.\n * @property {string} [html] - The HTML content to be set as the innerHTML of the element.\n * @property {{[key: string]: string|number}} [attributes] - An object representing additional attributes to set on the element.\n * @property {{[key: string]: string|number}} [data] - An object representing additional data attributes to set on the element.\n * @property {string} [type] - The type attribute to be set on the element (useful for elements like `input`).\n * @property {string} [title] - The title attribute to be set on the element.\n * @property {string} [alt] - The alt attribute to be set on the element.\n * @property {string} [src] - The src attribute to be set on the element.\n */\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {keyof HTMLElementTagNameMap} tagName - The name of the tag for the element to be created (e.g., 'div', 'span').\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLElement} The newly created DOM element.\n */\nexport function createElement(tagName, props = {}, children = []) {\n    const element = document.createElement(tagName);\n    if (props.class) {\n        if (typeof props.class === 'string') {\n            element.classList.add(props.class);\n        }\n        else {\n            element.classList.add(...props.class);\n        }\n    }\n    if (props.html) {\n        element.innerHTML = props.html || '';\n    }\n    if (props.attributes) {\n        for (const [attr, value] of Object.entries(props.attributes)) {\n            element.setAttribute(attr, value);\n        }\n    }\n    if (props.data) {\n        for (const [attr, value] of Object.entries(props.data)) {\n            element.setAttribute(`data-${attr}`, value);\n        }\n    }\n    if (props.type) {\n        element.type = props.type;\n    }\n    if (props.title) {\n        element.title = props.title;\n    }\n    if (props.alt) {\n        element.alt = props.alt;\n    }\n    if (props.src) {\n        element.src = props.src;\n    }\n    if (children) {\n        if (!Array.isArray(children) && children instanceof HTMLElement) {\n            children = [children];\n        }\n        element.append(...children);\n    }\n    return element;\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLDivElement} The newly created DOM element.\n */\nexport function createDivElement(props = {}, children = []) {\n    return createElement('div', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLSpanElement} The newly created DOM element.\n */\nexport function createSpanElement(props = {}, children = []) {\n    return createElement('span', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLButtonElement} The newly created DOM element.\n */\nexport function createButtonElement(props = {}, children = []) {\n    props.type = 'button';\n    return createElement('button', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @returns {HTMLImageElement} The newly created DOM element.\n */\nexport function createImgElement(props = {}) {\n    return createElement('img', props);\n}\nexport function createIconElement(name, size = 24) {\n    return createSpanElement({\n        html: name,\n        class: 'x-icon',\n        attributes: {\n            size,\n        },\n    });\n}\nexport function show(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = false;\n    }\n}\nexport function hide(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = true;\n    }\n}\nexport function qAll(selector) {\n    const data = [];\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => data.push(el));\n    return els;\n}\nexport function q(selector) {\n    return document.querySelector(selector);\n}\nexport function getInputValue(id) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (!element) {\n        return null;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"]:checked`);\n        return radioElement.value;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        return element.checked;\n    }\n    return element.value;\n}\nexport function setInputValue(id, value) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"][value=\"${value}\"]`);\n        radioElement.checked = true;\n        return;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        element.checked = value;\n        return;\n    }\n    element.value = value;\n}\n","/**\n * Tablica CRC32\n */\nconst crcTable = (() => {\n    let c;\n    const table = [];\n    for (let n = 0; n < 256; n++) {\n        c = n;\n        for (let k = 0; k < 8; k++) {\n            c = c & 1 ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1);\n        }\n        table[n] = c;\n    }\n    return table;\n})();\n/**\n * Funkcja CRC32.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {number} - Liczbowy hash CRC32.\n */\nfunction crc32(str) {\n    let crc = 0 ^ (-1);\n    for (let i = 0; i < str.length; i++) {\n        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n    return (crc ^ (-1)) >>> 0;\n}\n/**\n * Konwertuje hash CRC32 na format heksadecymalny.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {string} - Krótki hash w formacie heksadecymalnym.\n */\nexport function getCrc32Hash(str) {\n    const hash = crc32(str);\n    return hash.toString(16).padStart(8, '0'); // Upewnienie się, że ma 8 znaków\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { getCrc32Hash } from './crc32';\nimport { q } from './dom-functions';\nexport function formatTime(seconds) {\n    const sec = Math.floor(seconds % 60); // Sekundy\n    const min = Math.floor((seconds % 3600) / 60); // Minuty\n    const hrs = Math.floor(seconds / 3600); // Godziny\n    const secStr = sec < 10 ? `0${sec}` : sec; // Dodaj zero przed sekundami, jeśli mniej niż 10\n    const minStr = min < 10 ? `0${min}` : min; // Dodaj zero przed minutami, jeśli mniej niż 10\n    if (hrs > 0) {\n        return `${hrs}:${minStr}:${secStr}`; // Format hh:mm:ss\n    }\n    else {\n        return `${minStr}:${secStr}`; // Format mm:ss\n    }\n}\nexport function getQualityLabel(width) {\n    if (width >= 3840)\n        return '4K';\n    if (width >= 2560)\n        return '1440p';\n    if (width >= 1920)\n        return '1080p';\n    if (width >= 1280)\n        return '720p';\n    if (width >= 854)\n        return '480p';\n    if (width >= 640)\n        return '360p';\n    return 'SD';\n}\nexport function getUuid(val) {\n    return getCrc32Hash(val.toString());\n}\nexport function getCurrentSection() {\n    const key = q(`.section-buttons button.selected`).getAttribute('data-section');\n    return key || ItemTypeEnum.IMAGE;\n}\n","export const imageRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:bmp|gif|jpe?g|png|svg|webp))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const videoRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mkv|flv|ogg|ogv|gifv|avi|mov|wmv|rm|rmvb|mp4|m4p|m4v|mpg|mpeg|3gp|3g2|webm))(?:\\?([^#]*))?(?:#(.*))?/i;\nexport const audioRegex = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:mp3|flac|ogg|wma))(?:\\?([^#]*))?(?:#(.*))?/i;\n","import { audioRegex, imageRegex, videoRegex } from './regex-pattern';\nexport function isNotYouTubeLink({ src }) {\n    return !src.includes('https://www.youtube.com')\n        && !src.includes('https://www.youtu.be')\n        && !src.includes('https://youtube.com')\n        && !src.includes('https://youtu.be');\n}\nexport function isNotEmpty({ src }) {\n    return !!src;\n}\nexport function isImageURL(url) {\n    return url.startsWith('data:image') || imageRegex.test(url);\n}\nexport function isVideoURL(url) {\n    return url.startsWith('data:video') || videoRegex.test(url);\n}\nexport function isAudioURL(url) {\n    return url.startsWith('data:audio') || audioRegex.test(url);\n}\nexport function removeDuplicateOrEmpty(data) {\n    let result = [...new Map(data.map((item) => [item.src, item])).values()];\n    result = result.filter(({ src }) => !!src);\n    return result;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction getFileTypeFromBase64(base64String) {\n    const match = base64String.match(/^data:(.+);base64,/);\n    const ext = match ? match[1].split('/')[1] : null;\n    if (ext === null || ext === void 0 ? void 0 : ext.startsWith('svg+xml')) {\n        return 'svg';\n    }\n    return ext;\n}\nfunction getFileTypeFromUrl(url) {\n    let lastUrlSegment = url.split('/').pop();\n    if (!lastUrlSegment || !lastUrlSegment.includes('.')) {\n        return null;\n    }\n    lastUrlSegment = lastUrlSegment.split('?')[0];\n    const lastAfterDot = lastUrlSegment.split('.').pop();\n    if (!lastAfterDot) {\n        return null;\n    }\n    return lastAfterDot.toLowerCase().split('?')[0];\n}\nfunction getFileTypeFromUrlHeaders(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const response = yield fetch(url, { method: 'HEAD', referrer: window.location.origin });\n            const contentType = response.headers.get('Content-Type');\n            if (contentType) {\n                const type = contentType.split('/')[1];\n                if (type.startsWith('svg+xml')) {\n                    return 'svg';\n                }\n            }\n        }\n        catch (error) {\n            return 'png';\n        }\n        return null;\n    });\n}\nexport function getFileType(urlOrBase64) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (urlOrBase64 === null) {\n            return null;\n        }\n        const base64Pattern = /^data:(.+);base64,/;\n        let filetype;\n        if (base64Pattern.test(urlOrBase64)) {\n            filetype = getFileTypeFromBase64(urlOrBase64);\n        }\n        else {\n            const extension = getFileTypeFromUrl(urlOrBase64);\n            if (extension) {\n                filetype = extension;\n            }\n            else {\n                try {\n                    filetype = yield getFileTypeFromUrlHeaders(urlOrBase64);\n                }\n                catch (e) {\n                    filetype = 'png';\n                }\n            }\n        }\n        return filetype || 'png';\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getUuid } from '../utils/utils';\nimport { getAltFromElement } from './extractors-fn';\nimport { getFileType } from './file-type-fn';\nimport { removeDuplicateOrEmpty } from './filters-fn';\nexport function relativeUrlToAbsolute(url) {\n    if (url === null) {\n        return null;\n    }\n    return url.startsWith('/') ? `${window.location.origin}${url}` : url;\n}\nexport function mapToFullInfo() {\n    return __awaiter(this, arguments, void 0, function* (src = '', altOrElement = null, poster = undefined) {\n        let extension = null;\n        if (src.length) {\n            extension = yield getFileType(src);\n        }\n        let alt = null;\n        if (altOrElement !== null) {\n            if (typeof altOrElement !== 'string') {\n                alt = getAltFromElement(altOrElement);\n            }\n        }\n        const info = { src, alt, extension };\n        if (poster !== undefined) {\n            info.poster = poster;\n        }\n        return info;\n    });\n}\nexport function mapToFinalResultArray(data, type) {\n    return removeDuplicateOrEmpty(data.map(item => mapToFinalResultItem(item, type)));\n}\nfunction mapToFinalResultItem(item, type) {\n    return {\n        tabUuid: '',\n        tabId: -1,\n        itemIndex: '',\n        src: relativeUrlToAbsolute(item.src) || '',\n        extension: item.extension,\n        type,\n        alt: item.alt,\n        selected: false,\n        poster: item.poster ? relativeUrlToAbsolute(item.poster) : null,\n        uuid: item.uuid || getUuid(item.src),\n        properties: {\n            width: 0,\n            height: 0,\n            duration: 0,\n            durationStr: '',\n            quality: 'SD',\n        },\n    };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { qAll } from '../utils/dom-functions';\nimport { isAudioURL, isImageURL, isNotEmpty, isNotYouTubeLink, isVideoURL } from './filters-fn';\nimport { mapToFullInfo } from './mappers-fn';\nfunction extractImageFromElement(element) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (element.tagName.toLowerCase() === 'img') {\n            const src = getSrcFromElement(element);\n            return mapToFullInfo(src, element);\n        }\n        if (element.tagName.toLowerCase() === 'a') {\n            const href = element.href;\n            if (isImageURL(href)) {\n                return mapToFullInfo(href, element);\n            }\n        }\n        const backgroundImage = window.getComputedStyle(element).backgroundImage;\n        if (backgroundImage) {\n            const parsedURL = extractURLFromStyle(backgroundImage);\n            if (isImageURL(parsedURL)) {\n                return mapToFullInfo(parsedURL);\n            }\n        }\n        return mapToFullInfo();\n    });\n}\nfunction extractVideoFromElement(element) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (element.tagName.toLowerCase() === 'video') {\n            const sourceElement = element.querySelector('source');\n            const src = sourceElement\n                ? getSrcFromElement(sourceElement)\n                : getSrcFromElement(element);\n            return mapToFullInfo(src, element, getPosterFromVideoElement(element));\n        }\n        if (element.tagName.toLowerCase() === 'a') {\n            const href = element.href;\n            if (isVideoURL(href)) {\n                return mapToFullInfo(href, element, null);\n            }\n        }\n        return mapToFullInfo('', null, null);\n    });\n}\nfunction extractAudioFromElement(element) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (element.tagName.toLowerCase() === 'audio') {\n            const sourceElement = element.querySelector('source');\n            const src = sourceElement\n                ? getSrcFromElement(sourceElement)\n                : getSrcFromElement(element);\n            return mapToFullInfo(src, element);\n        }\n        if (element.tagName.toLowerCase() === 'a') {\n            const href = element.href;\n            if (isAudioURL(href)) {\n                return mapToFullInfo(href, element);\n            }\n        }\n        return mapToFullInfo();\n    });\n}\nfunction extractURLFromStyle(url) {\n    return url.replace(/^url\\([\"']?/, '').replace(/[\"']?\\)$/, '');\n}\nfunction getSrcFromElement(element) {\n    let src = element.getAttribute('src') || '';\n    const hashIndex = src === null || src === void 0 ? void 0 : src.indexOf('#');\n    if (hashIndex >= 0) {\n        src = src.substring(0, hashIndex + 1);\n    }\n    return src;\n}\nexport function getAltFromElement(element) {\n    const alt = element.getAttribute('alt');\n    if (!alt) {\n        return null;\n    }\n    if (alt.length === 0) {\n        return null;\n    }\n    return alt;\n}\nfunction getPosterFromVideoElement(element) {\n    let poster = element.getAttribute('poster')\n        || element.getAttribute('data-poster')\n        || '';\n    const hashIndex = poster === null || poster === void 0 ? void 0 : poster.indexOf('#');\n    if (hashIndex >= 0) {\n        poster = poster.substring(0, hashIndex + 1);\n    }\n    return poster;\n}\nexport function extractDataFromTags(selectors, mapFn) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const elements = [...qAll(selectors)];\n        const promises = elements.map(mapFn);\n        const results = yield Promise.all(promises);\n        return results\n            .filter(isNotEmpty)\n            .filter(isNotYouTubeLink);\n    });\n}\nexport function extractImagesFromTags() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return extractDataFromTags('img, a, [style]', extractImageFromElement);\n    });\n}\nexport function extractVideosFromTags() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return extractDataFromTags('video, a', extractVideoFromElement);\n    });\n}\nexport function extractAudiosFromTags() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return extractDataFromTags('audio, a', extractAudioFromElement);\n    });\n}\nexport function extractImagesFromStyles() {\n    return Promise.all(Array.from(document.styleSheets)\n        .filter(styleSheet => styleSheet.hasOwnProperty('cssRules'))\n        .map(({ cssRules }) => Array.from(cssRules))\n        .flat()\n        .filter((cssRule) => cssRule.style && cssRule.style.backgroundImage)\n        .map((cssRule) => extractURLFromStyle(cssRule.style.backgroundImage))\n        .filter((url) => !!url)\n        .filter((url) => isImageURL(url))\n        .map((url) => mapToFullInfo(url)));\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { MessageEventNameEnum } from '../types/message-event-name.enum';\nimport { sendMessage } from '../utils/chrome-api';\nimport { createElement, createImgElement } from '../utils/dom-functions';\nimport { formatTime, getQualityLabel } from '../utils/utils';\nimport { extractAudiosFromTags, extractImagesFromStyles, extractImagesFromTags, extractVideosFromTags, } from './extractors-fn';\nimport { mapToFinalResultArray } from './mappers-fn';\n(() => {\n    function sendMedia(images, audios, videos, tab, error = null) {\n        sendMessage(MessageEventNameEnum.SEND_MEDIA, {\n            error,\n            image: images,\n            audio: audios,\n            video: videos,\n            tabInfo: tab,\n        });\n    }\n    function gatherMedia(tab) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let error = null;\n            let images = [];\n            let videos = [];\n            let audios = [];\n            try {\n                const imagesFromTags = yield extractImagesFromTags();\n                const imagesFromStyles = yield extractImagesFromStyles();\n                images = mapToFinalResultArray([...imagesFromTags, ...imagesFromStyles], ItemTypeEnum.IMAGE);\n                const videosFromTags = yield extractVideosFromTags();\n                videos = mapToFinalResultArray(videosFromTags, ItemTypeEnum.VIDEO);\n                const audiosFromTags = yield extractAudiosFromTags();\n                audios = mapToFinalResultArray(audiosFromTags, ItemTypeEnum.AUDIO);\n            }\n            catch (err) {\n                console.log({ err });\n                error = Object.assign({}, err);\n            }\n            if (error) {\n                sendMedia([], [], [], tab, error);\n                return;\n            }\n            images.forEach(img => {\n                const imgEl = createImgElement();\n                imgEl.addEventListener('load', () => {\n                    img.properties.width = imgEl.naturalWidth;\n                    img.properties.height = imgEl.naturalHeight;\n                    imgEl.remove();\n                    sendMedia([img], [], [], tab);\n                });\n                imgEl.src = img.src;\n            });\n            videos.forEach(video => {\n                const videoEl = createElement('video');\n                videoEl.addEventListener('loadedmetadata', () => {\n                    video.properties.quality = getQualityLabel(videoEl.videoWidth);\n                    videoEl.remove();\n                    sendMedia([], [], [video], tab);\n                });\n                videoEl.src = video.src;\n            });\n            audios.forEach(audio => {\n                const audioEl = createElement('audio');\n                audioEl.addEventListener('loadedmetadata', () => {\n                    const duration = formatTime(audioEl.duration);\n                    audio.properties.duration = audioEl.duration;\n                    audio.properties.durationStr = duration;\n                    audioEl.remove();\n                    sendMedia([], [audio], [], tab);\n                });\n                audioEl.src = audio.src;\n            });\n        });\n    }\n    sendMessage(MessageEventNameEnum.GET_TAB_INFO, {}, (tab) => {\n        gatherMedia(tab);\n    });\n})();\n"],"names":["MessageEventNameEnum","ItemTypeEnum","sendMessage","eventName","data","callback","response","chrome","runtime","_a","createElement","tagName","props","children","element","document","class","classList","add","html","innerHTML","attributes","attr","value","Object","entries","setAttribute","type","title","alt","src","Array","isArray","HTMLElement","append","qAll","selector","els","querySelectorAll","forEach","el","push","crcTable","c","table","n","k","getUuid","val","str","crc","i","length","charCodeAt","crc32","toString","padStart","imageRegex","videoRegex","audioRegex","isNotYouTubeLink","includes","isNotEmpty","isImageURL","url","startsWith","test","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","relativeUrlToAbsolute","window","location","origin","mapToFullInfo","this","arguments","altOrElement","poster","undefined","extension","urlOrBase64","filetype","base64String","match","ext","split","getFileTypeFromBase64","lastUrlSegment","pop","lastAfterDot","toLowerCase","getFileTypeFromUrl","contentType","fetch","method","referrer","headers","get","error","getFileTypeFromUrlHeaders","getFileType","getAttribute","getAltFromElement","info","mapToFinalResultArray","Map","map","item","values","filter","removeDuplicateOrEmpty","tabUuid","tabId","itemIndex","selected","uuid","properties","width","height","duration","durationStr","quality","mapToFinalResultItem","extractImageFromElement","getSrcFromElement","href","backgroundImage","getComputedStyle","parsedURL","extractURLFromStyle","extractVideoFromElement","querySelector","hashIndex","indexOf","substring","getPosterFromVideoElement","extractAudioFromElement","replace","extractDataFromTags","selectors","mapFn","promises","all","sendMedia","images","audios","videos","tab","SEND_MEDIA","image","audio","video","tabInfo","gatherMedia","imagesFromTags","extractImagesFromTags","imagesFromStyles","from","styleSheets","styleSheet","hasOwnProperty","cssRules","flat","cssRule","style","IMAGE","extractVideosFromTags","VIDEO","extractAudiosFromTags","AUDIO","err","console","log","assign","img","imgEl","createImgElement","addEventListener","naturalWidth","naturalHeight","remove","videoEl","videoWidth","audioEl","seconds","sec","Math","floor","min","hrs","secStr","minStr","formatTime","GET_TAB_INFO"],"sourceRoot":""}