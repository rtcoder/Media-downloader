{"version":3,"file":"downloader/main.bundle.js","mappings":"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","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/storage/storage-def.ts","webpack://media-downloader/./src/utils/dom-functions.ts","webpack://media-downloader/./src/media-in-tabs.ts","webpack://media-downloader/./src/utils/crc32.ts","webpack://media-downloader/./src/utils/utils.ts","webpack://media-downloader/./src/downloader/filters/filters.ts","webpack://media-downloader/./src/downloader/filters/filter-fn.ts","webpack://media-downloader/./src/downloader/accordion/grid-item-thumbnail.ts","webpack://media-downloader/./src/downloader/accordion/accordion-item.ts","webpack://media-downloader/./src/downloader/accordion/grid-item.ts","webpack://media-downloader/./src/downloader/accordion/accordion-group.ts","webpack://media-downloader/./src/media-display.ts","webpack://media-downloader/./src/downloader/accordion/accordion.ts","webpack://media-downloader/./src/downloader/media-types.ts","webpack://media-downloader/./src/downloader/dom-listeners.ts","webpack://media-downloader/./src/downloader/find-media.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/utils/yt-restriction.ts","webpack://media-downloader/./src/downloader/tab-info.ts","webpack://media-downloader/./src/downloader/send-media-listener.ts","webpack://media-downloader/./src/downloader/message-listeners.ts","webpack://media-downloader/./src/storage/storage-fn.ts","webpack://media-downloader/./src/downloader/main.ts","webpack://media-downloader/./src/utils/download-functions.ts"],"sourcesContent":["export var ItemTypeEnum;\n(function (ItemTypeEnum) {\n    ItemTypeEnum[\"IMAGE\"] = \"image\";\n    ItemTypeEnum[\"AUDIO\"] = \"audio\";\n    ItemTypeEnum[\"VIDEO\"] = \"video\";\n})(ItemTypeEnum || (ItemTypeEnum = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url) {\n    const downloadOptions = { url };\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    const cb = (res) => {\n        if (chrome.runtime.lastError) {\n            // console.error('Error send msg:', chrome.runtime.lastError);\n            return null;\n        }\n        if (!callback) {\n            callback = (response) => {\n            };\n        }\n        callback(res);\n    };\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, cb);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nexport var ThemeType;\n(function (ThemeType) {\n    ThemeType[\"LIGHT\"] = \"light\";\n    ThemeType[\"DARK\"] = \"dark\";\n    ThemeType[\"SYSTEM\"] = \"system\";\n})(ThemeType || (ThemeType = {}));\nexport var DefaultActionType;\n(function (DefaultActionType) {\n    DefaultActionType[\"POPUP\"] = \"popup\";\n    DefaultActionType[\"SIDE_PANEL\"] = \"side-panel\";\n})(DefaultActionType || (DefaultActionType = {}));\nexport const DEFAULT_SETTINGS = {\n    theme: ThemeType.SYSTEM,\n    defaultAction: DefaultActionType.POPUP,\n    previousVersion: null,\n    showChangelogLink: false,\n    lastOpenSection: ItemTypeEnum.IMAGE,\n    filters: {},\n    filtersOpen: false,\n};\nexport const DEFAULT_SETTINGS_KEYS = Object.keys(DEFAULT_SETTINGS);\n","export function setDisabled(selector, value) {\n    q(selector).disabled = value;\n}\nexport function toggleClass(selector, className, toggleValue = null) {\n    let elements = [];\n    if (typeof selector === 'string') {\n        elements = qAll(selector);\n    }\n    else if (Array.isArray(selector)) {\n        elements = [...selector];\n    }\n    else {\n        elements = [selector];\n    }\n    if (!elements.length) {\n        return;\n    }\n    if (toggleValue === null) {\n        [...elements].forEach(element => {\n            if (element.classList.contains(className)) {\n                element.classList.remove(className);\n            }\n            else {\n                element.classList.add(className);\n            }\n        });\n    }\n    else {\n        if (toggleValue) {\n            [...elements].forEach(element => element.classList.add(className));\n        }\n        else {\n            [...elements].forEach(element => element.classList.remove(className));\n        }\n    }\n}\nexport function hasClass(selector, className) {\n    let element;\n    if (typeof selector === 'string') {\n        element = q(selector);\n    }\n    else {\n        element = selector;\n    }\n    if (!element) {\n        return false;\n    }\n    return element.classList.contains(className);\n}\nexport function createElement(tagName, props = {}, children = []) {\n    const element = document.createElement(tagName);\n    if (props.class) {\n        if (typeof props.class === 'string') {\n            element.classList.add(props.class);\n        }\n        else {\n            element.classList.add(...props.class);\n        }\n    }\n    if (props.html) {\n        element.innerHTML = props.html || '';\n    }\n    if (props.attributes) {\n        for (const [attr, value] of Object.entries(props.attributes)) {\n            element.setAttribute(attr, value);\n        }\n    }\n    if (props.data) {\n        for (const [attr, value] of Object.entries(props.data)) {\n            element.setAttribute(`data-${attr}`, value);\n        }\n    }\n    if (props.type) {\n        element.type = props.type;\n    }\n    if (props.title) {\n        element.title = props.title;\n    }\n    if (props.alt) {\n        element.alt = props.alt;\n    }\n    if (props.src) {\n        element.src = props.src;\n    }\n    if (props.href) {\n        element.href = props.href;\n    }\n    if (children) {\n        if (!Array.isArray(children) && children instanceof HTMLElement) {\n            children = [children];\n        }\n        element.append(...children);\n    }\n    return element;\n}\nexport function createDivElement(props = {}, children = []) {\n    return createElement('div', props, children);\n}\nexport function createSpanElement(props = {}, children = []) {\n    return createElement('span', props, children);\n}\nexport function createButtonElement(props = {}, children = []) {\n    props.type = 'button';\n    return createElement('button', props, children);\n}\nexport function createImgElement(props = {}) {\n    return createElement('img', props);\n}\nexport function createIconElement(name, size = 24) {\n    return createSpanElement({\n        html: name,\n        class: 'x-icon',\n        attributes: {\n            size,\n        },\n    });\n}\nexport function show(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = false;\n    }\n}\nexport function hide(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = true;\n    }\n}\nexport function qAll(selector) {\n    const data = [];\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => data.push(el));\n    return els;\n}\nexport function q(selector) {\n    return document.querySelector(selector);\n}\nexport function getInputValue(id) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (!element) {\n        return null;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"]:checked`);\n        return radioElement.value;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        return element.checked;\n    }\n    return element.value;\n}\nexport function setInputValue(id, value) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"][value=\"${value}\"]`);\n        radioElement.checked = true;\n        return;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        element.checked = value;\n        return;\n    }\n    element.value = value;\n}\n","export const mediaInTabs = [];\nexport const tabExpanded = {};\nexport const tabsInfo = {};\nexport const tabCollections = []; //contains tabs IDs\nexport function getTabsFromCollection(tabId) {\n    return Object.values(tabsInfo).filter(tabInfo => tabInfo.id === tabId);\n}\nexport function getMediaByTabUuid(uuid, type) {\n    return mediaInTabs.find(mediaItem => mediaItem.uuid === uuid && mediaItem.type === type);\n}\n","/**\n * Tablica CRC32\n */\nconst crcTable = (() => {\n    let c;\n    const table = [];\n    for (let n = 0; n < 256; n++) {\n        c = n;\n        for (let k = 0; k < 8; k++) {\n            c = c & 1 ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1);\n        }\n        table[n] = c;\n    }\n    return table;\n})();\n/**\n * Funkcja CRC32.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {number} - Liczbowy hash CRC32.\n */\nfunction crc32(str) {\n    let crc = 0 ^ (-1);\n    for (let i = 0; i < str.length; i++) {\n        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n    return (crc ^ (-1)) >>> 0;\n}\n/**\n * Konwertuje hash CRC32 na format heksadecymalny.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {string} - Krótki hash w formacie heksadecymalnym.\n */\nexport function getCrc32Hash(str) {\n    const hash = crc32(str);\n    return hash.toString(16).padStart(8, '0'); // Upewnienie się, że ma 8 znaków\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { getCrc32Hash } from './crc32';\nimport { q } from './dom-functions';\nexport function formatTime(seconds) {\n    const sec = Math.floor(seconds % 60); // Sekundy\n    const min = Math.floor((seconds % 3600) / 60); // Minuty\n    const hrs = Math.floor(seconds / 3600); // Godziny\n    const secStr = sec < 10 ? `0${sec}` : sec; // Dodaj zero przed sekundami, jeśli mniej niż 10\n    const minStr = min < 10 ? `0${min}` : min; // Dodaj zero przed minutami, jeśli mniej niż 10\n    if (hrs > 0) {\n        return `${hrs}:${minStr}:${secStr}`; // Format hh:mm:ss\n    }\n    else {\n        return `${minStr}:${secStr}`; // Format mm:ss\n    }\n}\nexport function getQualityLabel(width) {\n    if (width >= 3840)\n        return '4K';\n    if (width >= 2560)\n        return '1440p';\n    if (width >= 1920)\n        return '1080p';\n    if (width >= 1280)\n        return '720p';\n    if (width >= 854)\n        return '480p';\n    if (width >= 640)\n        return '360p';\n    return 'SD';\n}\nexport function getUuid(val) {\n    return getCrc32Hash(val.toString());\n}\nexport function getCurrentSection() {\n    const key = q(`.section-buttons button.selected`).getAttribute('data-section');\n    return key || ItemTypeEnum.IMAGE;\n}\nexport function randomStr(length = 10) {\n    const characters = 'abcdefghijklmnopqrstuvwxyz';\n    let result = '';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\nexport function sortOrderAsc(a, b) {\n    return a.order - b.order;\n}\n","import { displayMedia } from '../../media-display';\nimport { getFiltersOpenValue, getFiltersValue } from '../../storage/storage-fn';\nimport { ItemTypeEnum } from '../../types/media-in-tabs.type';\nimport { setStorageValue } from '../../utils/chrome-api';\nimport { createDivElement, createIconElement, createSpanElement, hide, q, show, toggleClass, } from '../../utils/dom-functions';\nimport { getCurrentSection } from '../../utils/utils';\nconst FILTERS = {\n    minWidth: null,\n    maxWidth: null,\n    minHeight: null,\n    maxHeight: null,\n    imageType: [],\n    videoQuality: [],\n    videoType: [],\n    audioType: [],\n};\nfunction collectFilterValues() {\n    ['minWidth', 'maxWidth', 'minHeight', 'maxHeight'].forEach((key) => {\n        const input = q(`input#${key}`);\n        const value = FILTERS[key];\n        if (value) {\n            input.value = value;\n        }\n    });\n    ['imageType', 'videoQuality', 'videoType', 'audioType'].forEach((key) => {\n        const select = q(`select#${key}`);\n        const values = FILTERS[key];\n        const chips = select.closest('.label-group').querySelector('.chips');\n        values.forEach((val) => {\n            const chip = getChip(val);\n            chips.appendChild(chip);\n        });\n    });\n}\nexport function isFiltered(type) {\n    const keysByType = {\n        [ItemTypeEnum.IMAGE]: ['minWidth', 'maxWidth', 'minHeight', 'maxHeight', 'imageType'],\n        [ItemTypeEnum.VIDEO]: ['videoType', 'videoQuality'],\n        [ItemTypeEnum.AUDIO]: ['audioType'],\n    };\n    return Object.keys(FILTERS)\n        .filter(k => keysByType[type].includes(k))\n        .some(k => { var _a; return !!((_a = FILTERS[k]) === null || _a === void 0 ? void 0 : _a.length); });\n}\nexport function initFilters() {\n    initFiltersListeners();\n    getFiltersValue(filters => {\n        Object.keys(filters).forEach(k => {\n            FILTERS[k] = filters[k];\n        });\n        collectFilterValues();\n    });\n    getFiltersOpenValue(filtersOpen => {\n        if (filtersOpen) {\n            show('.filters .filters-content');\n        }\n        else {\n            hide('.filters .filters-content');\n        }\n    });\n}\nfunction getChip(value) {\n    return createDivElement({ class: 'chip' }, [\n        createSpanElement({ html: value }),\n        createIconElement('close'),\n    ]);\n}\nfunction filtersChanged() {\n    setStorageValue({ filters: FILTERS });\n    updateFiltersIconActive();\n    displayMedia();\n}\nexport function updateFiltersIconActive() {\n    toggleClass('.open-filters', 'active-filters', isFiltered(getCurrentSection()));\n}\nfunction initFiltersListeners() {\n    const filtersDiv = q('.filters');\n    filtersDiv.addEventListener('change', e => {\n        const target = e.target;\n        if (target.matches('select')) {\n            if (!target.value) {\n                return;\n            }\n            if (FILTERS[target.id].includes(target.value)) {\n                target.value = '';\n                return;\n            }\n            const chip = getChip(target.value);\n            target.closest('.label-group').querySelector('.chips').appendChild(chip);\n            FILTERS[target.id].push(target.value);\n            filtersChanged();\n            target.value = '';\n            return;\n        }\n    });\n    filtersDiv.addEventListener('input', e => {\n        const target = e.target;\n        if (target.matches('input')) {\n            if (!target.value) {\n                FILTERS[target.id] = null;\n            }\n            else {\n                FILTERS[target.id] = target.value;\n            }\n            filtersChanged();\n            return;\n        }\n    });\n    filtersDiv.addEventListener('click', e => {\n        const target = e.target;\n        if (target.matches('.filters .x-icon.open-filters')) {\n            show('.filters .filters-content');\n            setStorageValue({ filtersOpen: true });\n            return;\n        }\n        if (target.matches('.filters .close-filters')) {\n            hide('.filters .filters-content');\n            setStorageValue({ filtersOpen: false });\n            return;\n        }\n        if (target.matches('.chip .x-icon')) {\n            const chipValue = target.parentElement.querySelector('span').textContent;\n            const filterKey = target.closest('.label-group').querySelector('select').id;\n            const filterIndex = FILTERS[filterKey].indexOf(chipValue);\n            FILTERS[filterKey].splice(filterIndex, 1);\n            target.parentElement.remove();\n            filtersChanged();\n            return;\n        }\n    });\n}\nexport function getFilters() {\n    return FILTERS;\n}\n","import { ItemTypeEnum } from '../../types/media-in-tabs.type';\nimport { getFilters } from './filters';\nexport function applyFilters(type, mediaToDisplay) {\n    if (type === ItemTypeEnum.IMAGE) {\n        return filterImages(mediaToDisplay);\n    }\n    if (type === ItemTypeEnum.AUDIO) {\n        return filterAudios(mediaToDisplay);\n    }\n    if (type === ItemTypeEnum.VIDEO) {\n        return filterVideos(mediaToDisplay);\n    }\n    return mediaToDisplay.map(item => {\n        item.display = true;\n        return item;\n    });\n}\nfunction filterImages(items) {\n    const filters = getFilters();\n    return items.map(item => {\n        var _a;\n        item.display = true;\n        const { width, height } = item.properties;\n        if (filters.maxWidth && width > filters.maxWidth) {\n            item.display = false;\n        }\n        if (filters.minWidth && width < filters.minWidth) {\n            item.display = false;\n        }\n        if (filters.minHeight && height < filters.minHeight) {\n            item.display = false;\n        }\n        if (filters.maxHeight && height > filters.maxHeight) {\n            item.display = false;\n        }\n        if (!!((_a = filters.imageType) === null || _a === void 0 ? void 0 : _a.length) && !filters.imageType.includes(item.extension)) {\n            item.display = false;\n        }\n        return item;\n    });\n}\nfunction filterAudios(items) {\n    const filters = getFilters();\n    return items.map(item => {\n        var _a;\n        item.display = true;\n        if (!!((_a = filters.audioType) === null || _a === void 0 ? void 0 : _a.length) && !filters.audioType.includes(item.extension)) {\n            item.display = false;\n        }\n        return item;\n    });\n}\nfunction filterVideos(items) {\n    const filters = getFilters();\n    return items.map(item => {\n        var _a, _b;\n        item.display = true;\n        if (!!((_a = filters.videoQuality) === null || _a === void 0 ? void 0 : _a.length) && !filters.videoQuality.includes(item.properties.quality)) {\n            item.display = false;\n        }\n        if (!!((_b = filters.videoType) === null || _b === void 0 ? void 0 : _b.length) && !filters.videoType.includes(item.extension)) {\n            item.display = false;\n        }\n        return item;\n    });\n}\n","import { createDivElement, createIconElement, createImgElement } from '../../utils/dom-functions';\nfunction getThumbnailContainer() {\n    return createDivElement({ class: 'thumbnail' });\n}\nexport function getAudioThumbnail() {\n    const thumbnailDiv = getThumbnailContainer();\n    const icon = createIconElement('music_note', 50);\n    thumbnailDiv.appendChild(icon);\n    return thumbnailDiv;\n}\nexport function getImageThumbnail(src) {\n    const thumbnailDiv = getThumbnailContainer();\n    const imgElement = createImgElement({ src });\n    thumbnailDiv.appendChild(imgElement);\n    return thumbnailDiv;\n}\nexport function getVideoThumbnail(poster) {\n    const thumbnailDiv = getThumbnailContainer();\n    const icon = createIconElement('videocam', 50);\n    const imagePoster = createImgElement({ src: poster });\n    thumbnailDiv.appendChild(poster ? imagePoster : icon);\n    return thumbnailDiv;\n}\n","import { getAllMediaToDisplay, isTabExpanded } from '../../media-display';\nimport { createButtonElement, createDivElement, createElement, createImgElement, createSpanElement, } from '../../utils/dom-functions';\nimport { getCurrentSection, sortOrderAsc } from '../../utils/utils';\nimport { applyFilters } from '../filters/filter-fn';\nimport { getGridItem } from './grid-item';\nfunction getAccordionHeader(accordionItem, favicon, name, filteredMediaToDisplay) {\n    const unfilteredCount = filteredMediaToDisplay.length;\n    const filteredCount = filteredMediaToDisplay.filter(item => item.display).length;\n    const count = filteredCount === unfilteredCount\n        ? `(${filteredCount})`\n        : `(${filteredCount} / ${unfilteredCount})`;\n    accordionItem.hidden = filteredCount === 0;\n    const existingHeader = accordionItem.querySelector('.accordion-header');\n    if (existingHeader) {\n        existingHeader.querySelector('.tab-media-count').innerHTML = count;\n        return existingHeader;\n    }\n    return createDivElement({ class: 'accordion-header' }, createButtonElement({ class: 'accordion-button' }, [\n        createImgElement({ src: favicon, class: 'favicon', alt: 'Favicon' }),\n        createSpanElement({ class: 'tab-title' }, [\n            createSpanElement({ class: 'title', html: name }),\n            createSpanElement({ class: 'tab-media-count', html: count }),\n        ]),\n        createSpanElement({ class: 'tab-toggle' }),\n    ]));\n}\nfunction getYtRestrictionInfo(body) {\n    const info = body.querySelector('.yt-info');\n    if (info) {\n        return info;\n    }\n    return createDivElement({ class: 'yt-info' }, [\n        createSpanElement({\n            html: 'Note: Chrome Web Store does not allow extensions that download videos from YouTube any longer.',\n        }),\n        createElement('a', {\n            href: 'https://developer.chrome.com/docs/webstore/troubleshooting/#prohibited-products',\n            html: 'Chrome policy',\n        }),\n    ]);\n}\nfunction getAccordionBody(accordionItem, items, tabId, tabUuid, restricted) {\n    const existingBody = accordionItem.querySelector('.accordion-body');\n    const body = existingBody\n        ? existingBody\n        : createDivElement({ class: 'accordion-body' });\n    if (!restricted) {\n        body.querySelectorAll('.grid-item')\n            .forEach((gridItem) => gridItem.hidden = true);\n        const children = items.sort(sortOrderAsc)\n            .map(item => getGridItem(body, item));\n        body.append(...children);\n    }\n    else {\n        body.appendChild(getYtRestrictionInfo(body));\n        body.classList.add('restricted');\n    }\n    return body;\n}\nexport function getAccordionItem(tabData, accordionItem) {\n    const { title, uuid, id, favIconUrl, isRestricted } = tabData;\n    const type = getCurrentSection();\n    const mediaToDisplay = getAllMediaToDisplay(uuid);\n    const filteredMediaToDisplay = applyFilters(type, mediaToDisplay);\n    const expanded = isTabExpanded(uuid);\n    const item = accordionItem\n        ? accordionItem\n        : createDivElement({ class: ['accordion-item', ...(expanded ? ['active'] : [])] });\n    item.setAttribute('tab-uuid', uuid);\n    item.classList.remove('first-item');\n    const header = getAccordionHeader(item, favIconUrl, title, filteredMediaToDisplay);\n    const body = getAccordionBody(item, filteredMediaToDisplay, id, uuid, isRestricted);\n    item.appendChild(header);\n    item.appendChild(body);\n    return item;\n}\n","import { ItemTypeEnum } from '../../types/media-in-tabs.type';\nimport { createButtonElement, createDivElement, createElement, createIconElement, createSpanElement, } from '../../utils/dom-functions';\nimport { getAudioThumbnail, getImageThumbnail, getVideoThumbnail } from './grid-item-thumbnail';\nexport function getGridItem(body, item) {\n    const existingItem = body.querySelector(`[data-item-idx=\"${item.itemIndex}\"]`);\n    if (existingItem) {\n        existingItem.hidden = !item.display;\n        return existingItem;\n    }\n    const gridItem = createDivElement({\n        class: ['grid-item', ...(item.selected ? ['checked'] : [])],\n        attributes: { 'data-item-idx': item.itemIndex },\n    });\n    gridItem.hidden = !item.display;\n    const btn = createButtonElement({ class: 'download_image_button' }, createIconElement('download'));\n    const anchor = createElement('a', {\n        attributes: { href: item.src, download: '' },\n    }, btn);\n    const dimensionsDiv = createSpanElement({ class: 'item-details-dimensions' });\n    const extension = createSpanElement({ class: 'item-details-ext', html: item.extension });\n    const duration = createSpanElement({ class: 'item-details-duration' });\n    let thumbnail = null;\n    switch (item.type) {\n        case ItemTypeEnum.IMAGE:\n            dimensionsDiv.textContent = `${item.properties.width} x ${item.properties.height}`;\n            thumbnail = getImageThumbnail(item.src);\n            break;\n        case ItemTypeEnum.AUDIO:\n            duration.textContent = item.properties.durationStr;\n            thumbnail = getAudioThumbnail();\n            break;\n        case ItemTypeEnum.VIDEO:\n            duration.textContent = item.properties.durationStr;\n            dimensionsDiv.textContent = item.properties.quality;\n            thumbnail = getVideoThumbnail(item.poster);\n            break;\n    }\n    gridItem.appendChild(anchor);\n    gridItem.appendChild(extension);\n    gridItem.appendChild(dimensionsDiv);\n    gridItem.appendChild(duration);\n    if (thumbnail) {\n        gridItem.appendChild(thumbnail);\n    }\n    return gridItem;\n}\n","import { getTabsFromCollection } from '../../media-in-tabs';\nimport { createDivElement } from '../../utils/dom-functions';\nimport { getAccordionItem } from './accordion-item';\nexport function getAccordionGroup(tabId, groupDiv) {\n    if (!groupDiv) {\n        groupDiv = createDivElement({\n            class: 'accordion-group',\n            attributes: {\n                'data-tab-subgroup': tabId,\n            },\n        });\n    }\n    getTabsFromCollection(tabId).forEach(tabData => {\n        const accordionItem = groupDiv.querySelector(`[tab-uuid=\"${tabData.uuid}\"]`);\n        groupDiv.appendChild(getAccordionItem(tabData, accordionItem));\n    });\n    const firstVisibleItem = Array.from(groupDiv.querySelectorAll('.accordion-item'))\n        .find(item => !item.hasAttribute('hidden'));\n    if (firstVisibleItem) {\n        firstVisibleItem.classList.add('first-item');\n    }\n    return groupDiv;\n}\n","import { updateAccordionData } from './downloader/accordion/accordion';\nimport { mediaInTabs, tabExpanded } from './media-in-tabs';\nimport { q } from './utils/dom-functions';\nimport { getCurrentSection } from './utils/utils';\nexport function getAllMediaToDisplay(tabUuid) {\n    const type = getCurrentSection();\n    let data = mediaInTabs.filter(item => item.type === type);\n    if (tabUuid) {\n        data = data.filter(mediaItem => mediaItem.tabUuid === tabUuid);\n    }\n    return data;\n}\nexport function displayMedia() {\n    updateAccordionData();\n    const type = getCurrentSection();\n    const countAll = q('.count-all');\n    countAll.innerHTML = mediaInTabs.filter(item => item.display && item.type === type).length.toString();\n}\nexport function setTabExpanded(tabUuid, value) {\n    tabExpanded[tabUuid] = value;\n}\nexport function isTabExpanded(tabUuid) {\n    return tabExpanded[tabUuid];\n}\n","import { tabCollections } from '../../media-in-tabs';\nimport { q } from '../../utils/dom-functions';\nimport { getAccordionGroup } from './accordion-group';\nexport function updateAccordionData() {\n    const accordion = q('.accordion');\n    tabCollections.forEach(tabId => {\n        const group = accordion.querySelector(`[data-tab-subgroup=\"${tabId}\"]`);\n        accordion.appendChild(getAccordionGroup(tabId, group));\n    });\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nexport const mediaTypes = [\n    ItemTypeEnum.IMAGE,\n    ItemTypeEnum.AUDIO,\n    ItemTypeEnum.VIDEO,\n];\n","import { displayMedia, getAllMediaToDisplay, isTabExpanded, setTabExpanded } from '../media-display';\nimport { mediaInTabs } from '../media-in-tabs';\nimport { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { createTab, setStorageValue } from '../utils/chrome-api';\nimport { hide, q, setDisabled, toggleClass } from '../utils/dom-functions';\nimport { downloadSelectedImages } from '../utils/download-functions';\nimport { getCurrentSection } from '../utils/utils';\nimport { applyFilters } from './filters/filter-fn';\nimport { updateFiltersIconActive } from './filters/filters';\nimport { mediaTypes } from './media-types';\nfunction changeToggleAllCheckbox(e) {\n    const { checked } = e.target;\n    let allAreChecked = true;\n    let allAreUnchecked = true;\n    const type = getCurrentSection();\n    const mediaToDisplay = getAllMediaToDisplay();\n    const filteredMediaToDisplay = applyFilters(type, mediaToDisplay);\n    let selectedCount = 0;\n    toggleClass('.grid-item', 'checked', checked);\n    for (let _idx = 0; _idx < filteredMediaToDisplay.length; _idx++) {\n        filteredMediaToDisplay[_idx].selected = checked;\n        if (filteredMediaToDisplay[_idx].selected) {\n            allAreUnchecked = false;\n            selectedCount++;\n        }\n        else {\n            allAreChecked = false;\n        }\n    }\n    updateSelectedCountText(selectedCount);\n    const toggle_all_checkbox = q('#toggle_all_checkbox');\n    toggle_all_checkbox.indeterminate = !(allAreChecked || allAreUnchecked);\n    if (allAreChecked) {\n        toggle_all_checkbox.checked = true;\n    }\n    else if (allAreUnchecked) {\n        toggle_all_checkbox.checked = false;\n    }\n}\nfunction onClickItem(target) {\n    const gridItem = target.closest('.grid-item');\n    const itemIndex = gridItem.getAttribute('data-item-idx');\n    const isChecked = gridItem.classList.contains('checked');\n    const newValue = !isChecked;\n    toggleClass(gridItem, 'checked');\n    const itemIndexInMedia = mediaInTabs.findIndex(obj => obj.itemIndex === itemIndex);\n    if (itemIndexInMedia === -1) {\n        return;\n    }\n    mediaInTabs[itemIndexInMedia].selected = newValue;\n    let allAreChecked = true;\n    let allAreUnchecked = true;\n    const mediaToDisplay = getAllMediaToDisplay();\n    let selectedCount = 0;\n    for (let _idx = 0; _idx < mediaToDisplay.length; _idx++) {\n        if (mediaToDisplay[_idx].selected) {\n            allAreUnchecked = false;\n            selectedCount++;\n        }\n        else {\n            allAreChecked = false;\n        }\n    }\n    updateSelectedCountText(selectedCount);\n    const toggle_all_checkbox = q('#toggle_all_checkbox');\n    toggle_all_checkbox.indeterminate = !(allAreChecked || allAreUnchecked);\n    if (allAreChecked) {\n        toggle_all_checkbox.checked = true;\n    }\n    else if (allAreUnchecked) {\n        toggle_all_checkbox.checked = false;\n    }\n}\nfunction updateSelectedCountText(selectedCount) {\n    q('#download-btn .selected-count').innerHTML = selectedCount > 0\n        ? `(${selectedCount})`\n        : '';\n    setDisabled('#download-btn', !selectedCount);\n}\nexport function selectSection(name) {\n    name = mediaTypes.includes(name) ? name : ItemTypeEnum.IMAGE;\n    setStorageValue({ lastOpenSection: name });\n    toggleClass('.section-buttons button', 'selected', false);\n    toggleClass(`.section-buttons button[data-section=\"${name}\"]`, 'selected', true);\n    const filtersDiv = q('.filters');\n    filtersDiv.classList.remove(ItemTypeEnum.IMAGE, ItemTypeEnum.AUDIO, ItemTypeEnum.VIDEO);\n    filtersDiv.classList.add(name);\n    updateFiltersIconActive();\n}\nexport function setDomListeners() {\n    document.body.addEventListener('click', e => {\n        const { target } = e;\n        if (!target) {\n            return;\n        }\n        if (target.closest('#download-btn')) {\n            downloadSelectedImages(getAllMediaToDisplay());\n            return;\n        }\n        if (target.closest('.section-buttons button')) {\n            selectSection(target.closest('.section-buttons button').getAttribute('data-section'));\n            displayMedia();\n            return;\n        }\n        if (target.matches('.thumbnail')) {\n            onClickItem(target);\n            return;\n        }\n        if (target.matches('.yt-info a')) {\n            window.open('https://developer.chrome.com/docs/webstore/troubleshooting/#prohibited-products');\n            return;\n        }\n        if (target.matches('.changelog-link')) {\n            setStorageValue({ showChangelogLink: false });\n            createTab({ url: 'views/changelog/index.html' });\n            hide(target);\n            return;\n        }\n        if (target.closest('.accordion-header')) {\n            const header = target.closest('.accordion-header');\n            const accordionItem = header.closest('.accordion-item');\n            const tabUuid = accordionItem.getAttribute('tab-uuid');\n            if (isTabExpanded(tabUuid)) {\n                setTabExpanded(tabUuid, false);\n                toggleClass(header.closest('.accordion-item'), 'active', false);\n            }\n            else {\n                setTabExpanded(tabUuid, true);\n                toggleClass(header.closest('.accordion-item'), 'active', true);\n            }\n        }\n    });\n    q('#toggle_all_checkbox').addEventListener('change', changeToggleAllCheckbox);\n}\n","import { executeContentScript } from '../utils/chrome-api';\nexport function findMedia(tabId = null) {\n    executeContentScript('/dist/content-script/send_media/send_media.bundle.js', tabId);\n}\nexport function findMediaQuickToDownload(tabId = null) {\n    executeContentScript('/dist/content-script/quick_send_media/quick_send_media.bundle.js', tabId);\n}\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"QUICK_SEND_MEDIA_FOR_DOWNLOAD\"] = \"quickSendMediaForDownload\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n    MessageEventNameEnum[\"THEME_CHANGED\"] = \"themeChanged\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","const restrictedUrls = [\n    'https://youtube.com',\n    'https://www.youtube.com',\n];\nexport function isRestrictedUrl(url) {\n    return restrictedUrls.some(restrictedUrl => url.includes(restrictedUrl));\n}\n","import { tabCollections, tabsInfo } from '../media-in-tabs';\nimport { getUuid } from '../utils/utils';\nimport { isRestrictedUrl } from '../utils/yt-restriction';\nexport function updateTabInfo(tab) {\n    const tabId = tab.id;\n    const tabUuid = getUuid(`${tabId}-${tab.url}`);\n    tabsInfo[tabUuid] = {\n        id: tabId,\n        favIconUrl: tab.favIconUrl,\n        url: tab.url,\n        title: tab.title,\n        isRestricted: isRestrictedUrl(tab.url),\n        uuid: tabUuid,\n    };\n    if (!tabCollections.includes(tabId)) {\n        tabCollections.push(tabId);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { displayMedia } from '../media-display';\nimport { mediaInTabs } from '../media-in-tabs';\nimport { getCurrentTab } from '../utils/chrome-api';\nimport { q } from '../utils/dom-functions';\nimport { getUuid } from '../utils/utils';\nimport { isRestrictedUrl } from '../utils/yt-restriction';\nimport { mediaTypes } from './media-types';\nimport { updateTabInfo } from './tab-info';\nconst tabJobMap = {};\nfunction updateMediaCount() {\n    mediaTypes.forEach(type => {\n        const count = mediaInTabs.filter(item => item.type === type).length;\n        q(`.section-buttons button[data-section=\"${type}\"] .items-count`).innerHTML = count.toString();\n    });\n}\nexport function sendMediaListener(data) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (data.error && Object.keys(data.error).length > 0) {\n            /// error\n            console.log(data);\n            return;\n        }\n        const currentTab = tabJobMap[data.jobHash] || (yield getCurrentTab());\n        if (!currentTab) {\n            return;\n        }\n        tabJobMap[data.jobHash] = currentTab;\n        updateTabInfo(currentTab);\n        const tabUuid = getUuid(`${currentTab.id}-${currentTab.url}`);\n        const restricted = isRestrictedUrl(currentTab.url);\n        if (restricted) {\n            displayMedia();\n            return;\n        }\n        const mapMedia = (item) => {\n            item.tabId = currentTab.id;\n            item.tabUuid = tabUuid;\n            item.itemIndex = `${currentTab.id}-${tabUuid}-${item.uuid}`;\n            return item;\n        };\n        const returnedMedia = data.media.map(mapMedia);\n        returnedMedia.forEach(newItem => {\n            const found = mediaInTabs.find(item => item.itemIndex === newItem.itemIndex);\n            if (!found) {\n                mediaInTabs.push(newItem);\n            }\n        });\n        updateMediaCount();\n        displayMedia();\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { MessageEventNameEnum } from '../types/message-event-name.enum';\nimport { getTab, onMessage } from '../utils/chrome-api';\nimport { findMedia } from './find-media';\nimport { sendMediaListener } from './send-media-listener';\nimport { updateTabInfo } from './tab-info';\nfunction tabCreatedListener(tab) {\n    updateTabInfo(tab);\n    if (tab.active) {\n        findMedia(tab.id);\n    }\n}\nfunction tabUpdatedListener(tabId, changeInfo, tab) {\n    updateTabInfo(tab);\n    if (tab.active && changeInfo.status === 'complete') {\n        findMedia(tab.id);\n    }\n}\nfunction tabReplacedListener(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const tab = yield getTab(tabId);\n        if (!tab) {\n            return;\n        }\n        updateTabInfo(tab);\n        if (tab.active) {\n            findMedia(tabId);\n        }\n    });\n}\nfunction tabActivatedListener(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const tab = yield getTab(tabId);\n        if (!tab) {\n            return;\n        }\n        updateTabInfo(tab);\n        if (tab.active) {\n            findMedia(tabId);\n        }\n    });\n}\nexport function setMessageListeners() {\n    onMessage((message, sender, sendResponse) => {\n        const { eventName, data } = message;\n        switch (eventName) {\n            case MessageEventNameEnum.TAB_UPDATED:\n                tabUpdatedListener(data.tabId, data.changeInfo, data.tab);\n                break;\n            case MessageEventNameEnum.TAB_ACTIVATED:\n                tabActivatedListener(data.tabId);\n                break;\n            case MessageEventNameEnum.TAB_CREATED:\n                tabCreatedListener(data.tab);\n                break;\n            case MessageEventNameEnum.TAB_REPLACED:\n                tabReplacedListener(data.tabId);\n                break;\n            case MessageEventNameEnum.SEND_MEDIA:\n                sendMediaListener(data);\n                break;\n        }\n        sendResponse(null);\n    });\n}\n","import { ItemTypeEnum } from '../types/media-in-tabs.type';\nimport { getStorageValue } from '../utils/chrome-api';\nimport { DEFAULT_SETTINGS, DefaultActionType, ThemeType } from './storage-def';\nexport function getStorageDefaultActionValue(callback) {\n    getStorageValue({ defaultAction: DefaultActionType.POPUP }, ({ defaultAction }) => {\n        if (!defaultAction) {\n            defaultAction = DEFAULT_SETTINGS.defaultAction;\n        }\n        callback(defaultAction);\n    });\n}\nexport function getStorageThemeValue(callback) {\n    getStorageValue({ theme: ThemeType.SYSTEM }, ({ theme }) => {\n        if (!theme) {\n            theme = DEFAULT_SETTINGS.theme;\n        }\n        callback(theme);\n    });\n}\nexport function getStoragePreviousVersionValue(callback) {\n    getStorageValue({ previousVersion: null }, ({ previousVersion }) => {\n        if (!previousVersion) {\n            previousVersion = DEFAULT_SETTINGS.previousVersion;\n        }\n        callback(previousVersion);\n    });\n}\nexport function getShowChangeLogLinkValue(callback) {\n    getStorageValue({ showChangelogLink: false }, ({ showChangelogLink }) => {\n        callback(!!showChangelogLink);\n    });\n}\nexport function getLastOpenSectionValue(callback) {\n    getStorageValue({ lastOpenSection: ItemTypeEnum.IMAGE }, ({ lastOpenSection }) => {\n        if (!lastOpenSection) {\n            lastOpenSection = DEFAULT_SETTINGS.lastOpenSection;\n        }\n        callback(lastOpenSection);\n    });\n}\nexport function getFiltersValue(callback) {\n    getStorageValue({ filters: {} }, ({ filters }) => {\n        if (!filters) {\n            filters = DEFAULT_SETTINGS.filters;\n        }\n        callback(filters);\n    });\n}\nexport function getFiltersOpenValue(callback) {\n    getStorageValue({ filtersOpen: false }, ({ filtersOpen }) => {\n        callback(!!filtersOpen);\n    });\n}\n","import { getLastOpenSectionValue, getShowChangeLogLinkValue } from '../storage/storage-fn';\nimport { show } from '../utils/dom-functions';\nimport { selectSection, setDomListeners } from './dom-listeners';\nimport { initFilters } from './filters/filters';\nimport { findMedia } from './find-media';\nimport { setMessageListeners } from './message-listeners';\nfunction init() {\n    findMedia();\n    setMessageListeners();\n    setDomListeners();\n    initFilters();\n    getShowChangeLogLinkValue(showChangelogLink => {\n        if (showChangelogLink) {\n            show('.changelog-link');\n        }\n    });\n    getLastOpenSectionValue(lastOpenSection => {\n        selectSection(lastOpenSection);\n    });\n}\ninit();\n","import { downloadUrl } from './chrome-api';\nexport function downloadSelectedImages(items) {\n    items.filter(item => item.selected)\n        .forEach(item => downloadUrl(item.src));\n}\nexport function downloadImages(items) {\n    items.forEach(item => downloadUrl(item.src));\n}\n"],"names":["ItemTypeEnum","DefaultActionType","ThemeType","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","getCurrentTab","this","_a","_b","queryOptions","active","lastFocusedWindow","tab","chrome","tabs","query","url","startsWith","_c","getTab","tabId","get","runtime","lastError","console","error","obj","callback","storage","sync","setStorageValue","set","theme","SYSTEM","defaultAction","POPUP","previousVersion","showChangelogLink","lastOpenSection","IMAGE","filters","filtersOpen","toggleClass","selector","className","toggleValue","elements","data","els","document","querySelectorAll","forEach","el","push","qAll","Array","isArray","length","element","classList","contains","remove","add","createElement","tagName","props","children","class","html","innerHTML","attributes","attr","Object","entries","setAttribute","type","title","alt","src","href","HTMLElement","append","createDivElement","createSpanElement","createButtonElement","createImgElement","createIconElement","name","size","show","q","hidden","hide","querySelector","keys","mediaInTabs","tabExpanded","tabsInfo","tabCollections","crcTable","c","table","n","k","getUuid","val","str","crc","i","charCodeAt","crc32","toString","padStart","getCurrentSection","getAttribute","sortOrderAsc","a","b","order","FILTERS","minWidth","maxWidth","minHeight","maxHeight","imageType","videoQuality","videoType","audioType","getChip","filtersChanged","updateFiltersIconActive","displayMedia","keysByType","VIDEO","AUDIO","filter","includes","some","isFiltered","getFilters","applyFilters","mediaToDisplay","items","map","item","display","width","height","properties","extension","filterImages","filterAudios","quality","filterVideos","getThumbnailContainer","getAccordionBody","accordionItem","tabUuid","restricted","body","appendChild","getYtRestrictionInfo","gridItem","sort","existingItem","itemIndex","selected","btn","anchor","download","dimensionsDiv","duration","thumbnail","textContent","thumbnailDiv","imgElement","getImageThumbnail","durationStr","icon","getAudioThumbnail","poster","imagePoster","getVideoThumbnail","getGridItem","getAccordionGroup","groupDiv","values","tabInfo","id","getTabsFromCollection","tabData","uuid","favIconUrl","isRestricted","filteredMediaToDisplay","getAllMediaToDisplay","expanded","isTabExpanded","header","favicon","unfilteredCount","filteredCount","count","existingHeader","getAccordionHeader","getAccordionItem","firstVisibleItem","from","find","hasAttribute","mediaItem","accordion","group","updateAccordionData","setTabExpanded","mediaTypes","changeToggleAllCheckbox","checked","target","allAreChecked","allAreUnchecked","selectedCount","_idx","updateSelectedCountText","toggle_all_checkbox","indeterminate","disabled","selectSection","filtersDiv","findMedia","scriptUrl_1","arguments","scriptUrl","scripting","executeScript","allFrames","files","MessageEventNameEnum","restrictedUrls","isRestrictedUrl","restrictedUrl","updateTabInfo","tabJobMap","sendMediaListener","log","currentTab","jobHash","media","newItem","message","sender","sendResponse","eventName","TAB_UPDATED","changeInfo","status","TAB_ACTIVATED","tabActivatedListener","TAB_CREATED","tabCreatedListener","TAB_REPLACED","tabReplacedListener","SEND_MEDIA","onMessage","addListener","setMessageListeners","addEventListener","closest","downloadOptions","downloads","matches","newValue","itemIndexInMedia","findIndex","onClickItem","window","open","details","create","chip","chipValue","parentElement","filterKey","filterIndex","indexOf","splice","initFiltersListeners","key","input","select","chips","initFilters"],"sourceRoot":""}