{"version":3,"file":"downloader/main.bundle.js","mappings":"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","sources":["webpack://media-downloader/./src/types/media-in-tabs.type.ts","webpack://media-downloader/./src/utils/chrome-api.ts","webpack://media-downloader/./src/storage/storage-def.ts","webpack://media-downloader/./src/utils/dom-functions.ts","webpack://media-downloader/./src/media-in-tabs.ts","webpack://media-downloader/./src/downloader/accordion.ts","webpack://media-downloader/./src/media-display.ts","webpack://media-downloader/./src/utils/crc32.ts","webpack://media-downloader/./src/utils/utils.ts","webpack://media-downloader/./src/utils/download-functions.ts","webpack://media-downloader/./src/downloader/media-types.ts","webpack://media-downloader/./src/downloader/dom-listeners.ts","webpack://media-downloader/./src/downloader/find-media.ts","webpack://media-downloader/./src/types/message-event-name.enum.ts","webpack://media-downloader/./src/utils/yt-restriction.ts","webpack://media-downloader/./src/downloader/send-media-listener.ts","webpack://media-downloader/./src/downloader/message-listeners.ts","webpack://media-downloader/./src/storage/storage-fn.ts","webpack://media-downloader/./src/downloader/main.ts"],"sourcesContent":["export var MediaInfoKeyEnum;\n(function (MediaInfoKeyEnum) {\n    MediaInfoKeyEnum[\"IMAGE\"] = \"image\";\n    MediaInfoKeyEnum[\"AUDIO\"] = \"audio\";\n    MediaInfoKeyEnum[\"VIDEO\"] = \"video\";\n})(MediaInfoKeyEnum || (MediaInfoKeyEnum = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function executeContentScript(scriptUrl_1) {\n    return __awaiter(this, arguments, void 0, function* (scriptUrl, tabId = null) {\n        if (!tabId) {\n            const tab = yield getCurrentTab();\n            if (!tab || !tab.id) {\n                return;\n            }\n            if (tab.id <= 0) {\n                return;\n            }\n            tabId = tab.id;\n        }\n        yield chrome.scripting.executeScript({\n            target: { tabId, allFrames: true },\n            files: [scriptUrl],\n        });\n    });\n}\nexport function getCurrentTab() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            let queryOptions = { active: true, lastFocusedWindow: true };\n            let [tab] = yield chrome.tabs.query(queryOptions);\n            console.log('current tabUrl: ', tab === null || tab === void 0 ? void 0 : tab.url, tab);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function getTab(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        try {\n            const tab = yield chrome.tabs.get(tabId);\n            if (chrome.runtime.lastError) {\n                console.error('Error get tab by ID:', chrome.runtime.lastError);\n                return null;\n            }\n            console.log('tabUrl: ', tab === null || tab === void 0 ? void 0 : tab.url);\n            if (!(tab === null || tab === void 0 ? void 0 : tab.url) || ((_a = tab === null || tab === void 0 ? void 0 : tab.url) === null || _a === void 0 ? void 0 : _a.startsWith('chrome://')) || ((_b = tab === null || tab === void 0 ? void 0 : tab.url) === null || _b === void 0 ? void 0 : _b.startsWith('https://chromewebstore.google.com'))) {\n                return null;\n            }\n            return tab;\n        }\n        catch (_c) {\n            return null;\n        }\n    });\n}\nexport function downloadUrl(url, filename = null) {\n    const downloadOptions = { url };\n    if (filename) {\n        downloadOptions.filename = filename;\n    }\n    chrome.downloads.download(downloadOptions);\n}\nexport function getStorageValue(obj, callback) {\n    chrome.storage.sync.get(obj, callback);\n}\nexport function setStorageValue(obj, callback) {\n    if (callback) {\n        chrome.storage.sync.set(obj, callback);\n    }\n    else {\n        chrome.storage.sync.set(obj);\n    }\n}\nexport function sendMessage(eventName, data = null, callback) {\n    if (!callback) {\n        callback = (response) => {\n        };\n    }\n    try {\n        chrome.runtime.sendMessage({ eventName, data }, callback);\n    }\n    catch (_a) {\n        // do nothing\n    }\n}\nexport function onMessage(callback) {\n    chrome.runtime.onMessage.addListener(callback);\n}\nexport function createTab(details) {\n    chrome.tabs.create(details);\n}\nexport function setPopupOptions(options) {\n    chrome.action.setPopup(options);\n}\nexport function setSidePanelOptions(options) {\n    chrome.sidePanel.setOptions(options);\n}\nexport function setSidePanelBehavior(options) {\n    chrome.sidePanel.setPanelBehavior(options).catch((error) => console.log(error));\n}\nexport function contextMenuClicked(callback) {\n    chrome.contextMenus.onClicked.addListener((info, tab) => {\n        if (!tab) {\n            return;\n        }\n        callback(info, tab);\n    });\n}\nexport function onInstalled(callback) {\n    chrome.runtime.onInstalled.addListener(callback);\n}\nexport function createContextMenu(properties) {\n    chrome.contextMenus.create(properties);\n}\nexport function onCreateTab(callback) {\n    chrome.tabs.onCreated.addListener(callback);\n}\nexport function onReplaceTab(callback) {\n    chrome.tabs.onReplaced.addListener(callback);\n}\nexport function onActivateTab(callback) {\n    chrome.tabs.onActivated.addListener(callback);\n}\nexport function onUpdateTab(callback) {\n    chrome.tabs.onUpdated.addListener(callback);\n}\nexport function onClickExtensionIcon(callback) {\n    chrome.action.onClicked.addListener(callback);\n}\nexport function openPopup(options) {\n    chrome.action.openPopup(options);\n}\nexport function openSidePanel(options) {\n    chrome.sidePanel.open(options);\n}\nexport function getVersion() {\n    return chrome.runtime.getManifest().version;\n}\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nexport var ThemeType;\n(function (ThemeType) {\n    ThemeType[\"LIGHT\"] = \"light\";\n    ThemeType[\"DARK\"] = \"dark\";\n    ThemeType[\"SYSTEM\"] = \"system\";\n})(ThemeType || (ThemeType = {}));\nexport var DefaultActionType;\n(function (DefaultActionType) {\n    DefaultActionType[\"POPUP\"] = \"popup\";\n    DefaultActionType[\"SIDE_PANEL\"] = \"side-panel\";\n})(DefaultActionType || (DefaultActionType = {}));\nexport const DEFAULT_SETTINGS = {\n    theme: ThemeType.SYSTEM,\n    defaultAction: DefaultActionType.POPUP,\n    previousVersion: null,\n    showChangelogLink: false,\n    lastOpenSection: MediaInfoKeyEnum.IMAGE,\n};\nexport const DEFAULT_SETTINGS_KEYS = Object.keys(DEFAULT_SETTINGS);\n","export function setDisabled(selector, value) {\n    q(selector).disabled = value;\n}\nexport function toggleClass(selector, className, toggleValue = null) {\n    let elements = [];\n    if (typeof selector === 'string') {\n        elements = qAll(selector);\n    }\n    else if (Array.isArray(selector)) {\n        elements = [...selector];\n    }\n    else {\n        elements = [selector];\n    }\n    if (!elements.length) {\n        return;\n    }\n    if (toggleValue === null) {\n        [...elements].forEach(element => {\n            if (element.classList.contains(className)) {\n                element.classList.remove(className);\n            }\n            else {\n                element.classList.add(className);\n            }\n        });\n    }\n    else {\n        if (toggleValue) {\n            [...elements].forEach(element => element.classList.add(className));\n        }\n        else {\n            [...elements].forEach(element => element.classList.remove(className));\n        }\n    }\n}\nexport function hasClass(selector, className) {\n    let element;\n    if (typeof selector === 'string') {\n        element = q(selector);\n    }\n    else {\n        element = selector;\n    }\n    if (!element) {\n        return false;\n    }\n    return element.classList.contains(className);\n}\n/**\n * @typedef {Object} Props\n * @property {string|string[]} [class] - A string or an array of strings representing the class(es) to be added to the element.\n * @property {string} [html] - The HTML content to be set as the innerHTML of the element.\n * @property {{[key: string]: string|number}} [attributes] - An object representing additional attributes to set on the element.\n * @property {{[key: string]: string|number}} [data] - An object representing additional data attributes to set on the element.\n * @property {string} [type] - The type attribute to be set on the element (useful for elements like `input`).\n * @property {string} [title] - The title attribute to be set on the element.\n * @property {string} [alt] - The alt attribute to be set on the element.\n * @property {string} [src] - The src attribute to be set on the element.\n */\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {keyof HTMLElementTagNameMap} tagName - The name of the tag for the element to be created (e.g., 'div', 'span').\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLElement} The newly created DOM element.\n */\nexport function createElement(tagName, props = {}, children = []) {\n    const element = document.createElement(tagName);\n    if (props.class) {\n        if (typeof props.class === 'string') {\n            element.classList.add(props.class);\n        }\n        else {\n            element.classList.add(...props.class);\n        }\n    }\n    if (props.html) {\n        element.innerHTML = props.html || '';\n    }\n    if (props.attributes) {\n        for (const [attr, value] of Object.entries(props.attributes)) {\n            element.setAttribute(attr, value);\n        }\n    }\n    if (props.data) {\n        for (const [attr, value] of Object.entries(props.data)) {\n            element.setAttribute(`data-${attr}`, value);\n        }\n    }\n    if (props.type) {\n        element.type = props.type;\n    }\n    if (props.title) {\n        element.title = props.title;\n    }\n    if (props.alt) {\n        element.alt = props.alt;\n    }\n    if (props.src) {\n        element.src = props.src;\n    }\n    if (children) {\n        if (!Array.isArray(children) && children instanceof HTMLElement) {\n            children = [children];\n        }\n        element.append(...children);\n    }\n    return element;\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLDivElement} The newly created DOM element.\n */\nexport function createDivElement(props = {}, children = []) {\n    return createElement('div', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLSpanElement} The newly created DOM element.\n */\nexport function createSpanElement(props = {}, children = []) {\n    return createElement('span', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @param {Children} [children] - Children nodes to be appended to the created element.\n * @returns {HTMLButtonElement} The newly created DOM element.\n */\nexport function createButtonElement(props = {}, children = []) {\n    props.type = 'button';\n    return createElement('button', props, children);\n}\n/**\n * Creates a new DOM element with the specified tag name and properties.\n *\n * @param {Props} [props] - An object containing properties to set on the element.\n * @returns {HTMLImageElement} The newly created DOM element.\n */\nexport function createImgElement(props = {}) {\n    return createElement('img', props);\n}\nexport function createIconElement(name, size = 24) {\n    return createSpanElement({\n        html: name,\n        class: 'x-icon',\n        attributes: {\n            size,\n        },\n    });\n}\nexport function show(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = false;\n    }\n}\nexport function hide(selector) {\n    const el = typeof selector === 'string'\n        ? q(selector)\n        : selector;\n    if (el) {\n        el.hidden = true;\n    }\n}\nexport function qAll(selector) {\n    const data = [];\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => data.push(el));\n    return els;\n}\nexport function q(selector) {\n    return document.querySelector(selector);\n}\nexport function getInputValue(id) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (!element) {\n        return null;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"]:checked`);\n        return radioElement.value;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        return element.checked;\n    }\n    return element.value;\n}\nexport function setInputValue(id, value) {\n    const elements = document.getElementsByName(id);\n    if (!elements.length) {\n        return;\n    }\n    const element = elements.item(0);\n    if (!element) {\n        return;\n    }\n    if (element.getAttribute('type') === 'radio') {\n        const radioElement = q(`input[name=\"${id}\"][value=\"${value}\"]`);\n        radioElement.checked = true;\n        return;\n    }\n    if (element.getAttribute('type') === 'checkbox') {\n        element.checked = value;\n        return;\n    }\n    element.value = value;\n}\n","export const mediaInTabs = [];\nexport const tabExpanded = {};\nexport const tabsInfo = {};\n","import { isTabExpanded } from '../media-display';\nimport { tabsInfo } from '../media-in-tabs';\nimport { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nimport { createButtonElement, createDivElement, createElement, createIconElement, createImgElement, createSpanElement, q, } from '../utils/dom-functions';\nfunction getThumbnailContainer() {\n    return createDivElement({\n        class: 'thumbnail',\n    });\n}\nfunction getAudioThumbnail() {\n    const thumbnailDiv = getThumbnailContainer();\n    const icon = createIconElement('music_note', 50);\n    thumbnailDiv.appendChild(icon);\n    return thumbnailDiv;\n}\nfunction getImageThumbnail(src) {\n    const thumbnailDiv = getThumbnailContainer();\n    const imgElement = createImgElement({ src });\n    thumbnailDiv.appendChild(imgElement);\n    return thumbnailDiv;\n}\nfunction getVideoThumbnail(poster) {\n    const thumbnailDiv = getThumbnailContainer();\n    const icon = createIconElement('videocam', 50);\n    const imagePoster = createImgElement({ src: poster });\n    thumbnailDiv.appendChild(poster ? imagePoster : icon);\n    return thumbnailDiv;\n}\nfunction getGridItem(item, itemIndex) {\n    const { src, alt, poster, type, selected, filetype } = item;\n    const gridItem = createDivElement({\n        class: ['grid-item', ...(selected ? ['checked'] : [])],\n        attributes: {\n            'data-src-dw': src,\n            'data-filename': (alt === null || alt === void 0 ? void 0 : alt.length) ? alt : '',\n            'data-item-idx': itemIndex,\n            'data-type': type,\n        },\n    });\n    const btn = createButtonElement({ class: 'download_image_button' }, createIconElement('download'));\n    const anchor = createElement('a', {\n        attributes: { href: item.src, download: item.alt || '' },\n    }, btn);\n    const dimensionsDiv = createSpanElement({ class: 'item-details-dimensions' });\n    const details = createSpanElement({ class: 'item-details' }, [\n        createSpanElement({ class: 'item-details-ext', html: filetype }),\n        dimensionsDiv,\n    ]);\n    let thumbnail = null;\n    switch (type) {\n        case MediaInfoKeyEnum.IMAGE:\n            dimensionsDiv.textContent = `${item.properties.width} x ${item.properties.height}`;\n            thumbnail = getImageThumbnail(src);\n            break;\n        case MediaInfoKeyEnum.AUDIO:\n            dimensionsDiv.textContent = item.properties.duration;\n            thumbnail = getAudioThumbnail();\n            break;\n        case MediaInfoKeyEnum.VIDEO:\n            dimensionsDiv.textContent = item.properties.duration;\n            thumbnail = getVideoThumbnail(poster);\n            break;\n    }\n    gridItem.appendChild(anchor);\n    gridItem.appendChild(details);\n    if (thumbnail) {\n        gridItem.appendChild(thumbnail);\n    }\n    return gridItem;\n}\nfunction getAccordionHeader(favicon, name, allCount) {\n    return createDivElement({ class: 'accordion-header' }, createButtonElement({ class: 'accordion-button' }, [\n        createImgElement({ src: favicon, class: 'favicon', alt: 'Favicon' }),\n        createSpanElement({ class: 'tab-title' }, [\n            createSpanElement({ class: 'title', html: name }),\n            createSpanElement({ class: 'tab-media-count', html: `(${allCount})` }),\n        ]),\n        createSpanElement({ class: 'tab-toggle' }),\n    ]));\n}\nfunction getYtRestrictionInfo() {\n    return createDivElement({ class: 'yt-info' }, [\n        createSpanElement({\n            html: 'Note: Chrome Web Store does not allow extensions that download videos from YouTube any longer.',\n        }),\n        createElement('a', {\n            href: 'https://developer.chrome.com/docs/webstore/troubleshooting/#prohibited-products',\n            html: 'Chrome policy',\n        }),\n    ]);\n}\nfunction getAccordionBody(items, tabId, tabUuid, restricted) {\n    const body = createDivElement({ class: 'accordion-body' });\n    if (!restricted) {\n        body.append(...items.map(item => {\n            return getGridItem(item, `${tabId}-${tabUuid}-${item.uuid}`);\n        }));\n    }\n    else {\n        body.appendChild(getYtRestrictionInfo());\n        body.classList.add('restricted');\n    }\n    return body;\n}\nfunction getAccordionItem(mediaToDisplayItem) {\n    const { title, uuid, id, favIconUrl, isRestricted } = tabsInfo[mediaToDisplayItem.tabUuid];\n    const expanded = isTabExpanded(uuid);\n    const item = createDivElement({\n        class: ['accordion-item', ...(expanded ? ['active'] : [])],\n    });\n    item.setAttribute('tab-uuid', uuid);\n    const header = getAccordionHeader(favIconUrl, title, mediaToDisplayItem.items.length);\n    const body = getAccordionBody(mediaToDisplayItem.items, id, uuid, isRestricted);\n    item.appendChild(header);\n    item.appendChild(body);\n    return item;\n}\nfunction getAccordionGroup(group) {\n    const groupDiv = createDivElement({\n        class: 'accordion-group',\n        attributes: {\n            'data-tab-subgroup': group.tabId,\n        },\n    });\n    group.data.forEach((mediaToDisplayItem) => {\n        groupDiv.appendChild(getAccordionItem(mediaToDisplayItem));\n    });\n    return groupDiv;\n}\nexport function updateAccordionData(mediaToDisplay) {\n    const accordion = q('.accordion');\n    accordion.innerHTML = '';\n    mediaToDisplay.forEach((group) => {\n        accordion.appendChild(getAccordionGroup(group));\n    });\n}\n","import { updateAccordionData } from './downloader/accordion';\nimport { mediaInTabs, tabExpanded } from './media-in-tabs';\nimport { q } from './utils/dom-functions';\nimport { countAllMedia, getCurrentSection, mapMediaItemToDisplayMediaItem } from './utils/utils';\nexport function getAllMediaToDisplay() {\n    const currentSection = getCurrentSection();\n    const mapFn = (media) => {\n        return media[currentSection].map((item) => {\n            return mapMediaItemToDisplayMediaItem(item, currentSection);\n        });\n    };\n    return mediaInTabs.map(group => {\n        const data = group.elements.map(({ media, tabUuid }) => {\n            const items = mapFn(media);\n            return { tabUuid, items };\n        });\n        return {\n            tabId: group.tabId,\n            data,\n        };\n    });\n}\nexport function displayMedia() {\n    const mediaToDisplay = getAllMediaToDisplay();\n    console.log(mediaToDisplay);\n    updateAccordionData(mediaToDisplay);\n    const countAll = q('.count-all');\n    countAll.innerHTML = countAllMedia(mediaToDisplay).toString();\n}\nexport function setTabExpanded(tabUuid, value) {\n    tabExpanded[tabUuid] = value;\n}\nexport function isTabExpanded(tabUuid) {\n    return tabExpanded[tabUuid];\n}\n","/**\n * Tablica CRC32\n */\nconst crcTable = (() => {\n    let c;\n    const table = [];\n    for (let n = 0; n < 256; n++) {\n        c = n;\n        for (let k = 0; k < 8; k++) {\n            c = c & 1 ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1);\n        }\n        table[n] = c;\n    }\n    return table;\n})();\n/**\n * Funkcja CRC32.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {number} - Liczbowy hash CRC32.\n */\nfunction crc32(str) {\n    let crc = 0 ^ (-1);\n    for (let i = 0; i < str.length; i++) {\n        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n    return (crc ^ (-1)) >>> 0;\n}\n/**\n * Konwertuje hash CRC32 na format heksadecymalny.\n * @param {string} str - Ciąg znaków do zhashowania.\n * @returns {string} - Krótki hash w formacie heksadecymalnym.\n */\nexport function getCrc32Hash(str) {\n    const hash = crc32(str);\n    return hash.toString(16).padStart(8, '0'); // Upewnienie się, że ma 8 znaków\n}\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nimport { getCrc32Hash } from './crc32';\nimport { q } from './dom-functions';\nexport function uniqueSourceItems(arr) {\n    return [...new Map(arr.map(item => [item.src, item])).values()];\n}\nexport function countAllMedia(mediaToDisplay) {\n    return mediaToDisplay.reduce((total, mediaGroup) => {\n        return total + mediaGroup.data.reduce((_total, media) => {\n            return _total + media.items.length;\n        }, 0);\n    }, 0);\n}\nexport function mapMediaItemToDisplayMediaItem(item, itemType) {\n    const { properties, src, uuid, poster, type, selected, alt } = item;\n    return {\n        properties,\n        src,\n        uuid,\n        poster,\n        filetype: type,\n        selected,\n        type: itemType,\n        alt,\n    };\n}\nexport function formatTime(seconds) {\n    const sec = Math.floor(seconds % 60); // Sekundy\n    const min = Math.floor((seconds % 3600) / 60); // Minuty\n    const hrs = Math.floor(seconds / 3600); // Godziny\n    const secStr = sec < 10 ? `0${sec}` : sec; // Dodaj zero przed sekundami, jeśli mniej niż 10\n    const minStr = min < 10 ? `0${min}` : min; // Dodaj zero przed minutami, jeśli mniej niż 10\n    if (hrs > 0) {\n        return `${hrs}:${minStr}:${secStr}`; // Format hh:mm:ss\n    }\n    else {\n        return `${minStr}:${secStr}`; // Format mm:ss\n    }\n}\nexport function getQualityLabel(width) {\n    if (width >= 3840)\n        return '4K';\n    if (width >= 2560)\n        return '1440p';\n    if (width >= 1920)\n        return '1080p';\n    if (width >= 1280)\n        return '720p';\n    if (width >= 854)\n        return '480p';\n    if (width >= 640)\n        return '360p';\n    return 'SD';\n}\nexport function getUuid(val) {\n    return getCrc32Hash(val.toString());\n}\nexport function getCurrentSection() {\n    return q(`.section-buttons button.selected`)\n        .getAttribute('data-section') || MediaInfoKeyEnum.IMAGE;\n}\n","import { downloadUrl } from './chrome-api';\nexport function downloadItem(itemInfo) {\n    downloadUrl(itemInfo.url, itemInfo.alt);\n}\nexport function downloadImages(mediaToDisplay) {\n    const checkedImages = [];\n    for (let i = 0; i < mediaToDisplay.length; i++) {\n        const { data } = mediaToDisplay[i];\n        for (let idx = 0; idx < data.length; idx++) {\n            const { items } = data[idx];\n            for (let _idx = 0; _idx < items.length; _idx++) {\n                if (items[_idx].selected) {\n                    checkedImages.push({\n                        url: items[_idx].src,\n                        alt: items[_idx].alt,\n                    });\n                }\n            }\n        }\n    }\n    checkedImages.forEach(downloadItem);\n}\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nexport const mediaTypes = [\n    MediaInfoKeyEnum.IMAGE,\n    MediaInfoKeyEnum.AUDIO,\n    MediaInfoKeyEnum.VIDEO\n];\n","import { displayMedia, getAllMediaToDisplay } from '../media-display';\nimport { mediaInTabs } from '../media-in-tabs';\nimport { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nimport { createTab, setStorageValue } from '../utils/chrome-api';\nimport { hide, q, setDisabled, toggleClass } from '../utils/dom-functions';\nimport { downloadImages } from '../utils/download-functions';\nimport { mediaTypes } from './media-types';\nfunction changeToggleAllCheckbox(e) {\n    const { checked } = e.target;\n    let allAreChecked = true;\n    let allAreUnchecked = true;\n    const mediaToDisplay = getAllMediaToDisplay();\n    let selectedCount = 0;\n    toggleClass('.grid-item', 'checked', checked);\n    for (let i = 0; i < mediaToDisplay.length; i++) {\n        const { data } = mediaToDisplay[i];\n        for (let idx = 0; idx < data.length; idx++) {\n            const { items } = data[idx];\n            for (let _idx = 0; _idx < items.length; _idx++) {\n                items[_idx].selected = checked;\n                if (items[_idx].selected) {\n                    allAreUnchecked = false;\n                    selectedCount++;\n                }\n                else {\n                    allAreChecked = false;\n                }\n            }\n        }\n    }\n    updateSelectedCountText(selectedCount);\n    const toggle_all_checkbox = q('#toggle_all_checkbox');\n    toggle_all_checkbox.indeterminate = !(allAreChecked || allAreUnchecked);\n    if (allAreChecked) {\n        toggle_all_checkbox.checked = true;\n    }\n    else if (allAreUnchecked) {\n        toggle_all_checkbox.checked = false;\n    }\n}\nfunction onClickItem(target) {\n    const gridItem = target.closest('.grid-item');\n    const itemIndex = gridItem.getAttribute('data-item-idx');\n    const type = gridItem.getAttribute('data-type');\n    const isChecked = gridItem.classList.contains('checked');\n    const newValue = !isChecked;\n    toggleClass(gridItem, 'checked');\n    const [tab_id, tabUuid, itemIdx] = itemIndex.split('-');\n    const groupIndexInSection = mediaInTabs.findIndex(({ tabId }) => tabId === +tab_id);\n    const tabIndexInSection = mediaInTabs[groupIndexInSection].elements.findIndex(obj => obj.tabUuid === tabUuid);\n    if (tabIndexInSection === -1) {\n        return;\n    }\n    mediaInTabs[groupIndexInSection].elements[tabIndexInSection].media[type][+itemIdx].selected = newValue;\n    let allAreChecked = true;\n    let allAreUnchecked = true;\n    const mediaToDisplay = getAllMediaToDisplay();\n    let selectedCount = 0;\n    console.log(itemIndex, newValue);\n    for (let i = 0; i < mediaToDisplay.length; i++) {\n        const { data } = mediaToDisplay[i];\n        for (let idx = 0; idx < data.length; idx++) {\n            const { items } = data[idx];\n            for (let _idx = 0; _idx < items.length; _idx++) {\n                if (items[_idx].selected) {\n                    allAreUnchecked = false;\n                    selectedCount++;\n                }\n                else {\n                    allAreChecked = false;\n                }\n            }\n        }\n    }\n    updateSelectedCountText(selectedCount);\n    const toggle_all_checkbox = q('#toggle_all_checkbox');\n    toggle_all_checkbox.indeterminate = !(allAreChecked || allAreUnchecked);\n    if (allAreChecked) {\n        toggle_all_checkbox.checked = true;\n    }\n    else if (allAreUnchecked) {\n        toggle_all_checkbox.checked = false;\n    }\n}\nfunction updateSelectedCountText(selectedCount) {\n    q('#download-btn .selected-count').innerHTML = selectedCount > 0\n        ? `(${selectedCount})`\n        : '';\n    setDisabled('#download-btn', !selectedCount);\n}\nexport function selectSection(name) {\n    name = mediaTypes.includes(name) ? name : MediaInfoKeyEnum.IMAGE;\n    setStorageValue({ lastOpenSection: name });\n    toggleClass('.section-buttons button', 'selected', false);\n    toggleClass(`.section-buttons button[data-section=\"${name}\"]`, 'selected', true);\n}\nexport function setDomListeners() {\n    document.body.addEventListener('click', e => {\n        const { target } = e;\n        if (!target) {\n            return;\n        }\n        if (target.closest('#download-btn')) {\n            downloadImages(getAllMediaToDisplay());\n            return;\n        }\n        if (target.closest('.section-buttons button')) {\n            selectSection(target.closest('.section-buttons button').getAttribute('data-section'));\n            displayMedia();\n            return;\n        }\n        if (target.matches('.thumbnail')) {\n            onClickItem(target);\n            return;\n        }\n        if (target.matches('.yt-info a')) {\n            window.open('https://developer.chrome.com/docs/webstore/troubleshooting/#prohibited-products');\n            return;\n        }\n        if (target.matches('.changelog-link')) {\n            setStorageValue({ showChangelogLink: false });\n            createTab({ url: 'views/changelog.html' });\n            hide(target);\n            return;\n        }\n        if (target.closest('.accordion-header')) {\n            const header = target.closest('.accordion-header');\n            toggleClass(header.closest('.accordion-item'), 'active');\n        }\n    });\n    q('#toggle_all_checkbox').addEventListener('change', changeToggleAllCheckbox);\n}\n","import { executeContentScript } from '../utils/chrome-api';\nexport function findMedia(tabId = null) {\n    executeContentScript('/dist/content-script/send_media.bundle.js', tabId);\n}\n","export var MessageEventNameEnum;\n(function (MessageEventNameEnum) {\n    MessageEventNameEnum[\"TAB_CREATED\"] = \"tabCreated\";\n    MessageEventNameEnum[\"TAB_REPLACED\"] = \"tabReplaced\";\n    MessageEventNameEnum[\"TAB_UPDATED\"] = \"tabUpdated\";\n    MessageEventNameEnum[\"TAB_ACTIVATED\"] = \"tabActivated\";\n    MessageEventNameEnum[\"SEND_MEDIA\"] = \"sendMedia\";\n    MessageEventNameEnum[\"GET_TAB_INFO\"] = \"getTabInfo\";\n})(MessageEventNameEnum || (MessageEventNameEnum = {}));\n","const restrictedUrls = [\n    'https://youtube.com',\n    'https://www.youtube.com',\n];\nexport function isRestrictedUrl(url) {\n    return restrictedUrls.some(restrictedUrl => url.includes(restrictedUrl));\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { displayMedia, setTabExpanded } from '../media-display';\nimport { mediaInTabs, tabsInfo } from '../media-in-tabs';\nimport { getCurrentTab } from '../utils/chrome-api';\nimport { q } from '../utils/dom-functions';\nimport { getUuid, uniqueSourceItems } from '../utils/utils';\nimport { isRestrictedUrl } from '../utils/yt-restriction';\nimport { mediaTypes } from './media-types';\nfunction updateTabInfo(info) {\n    const tabUuid = getUuid(`${info.id}-${info.url}`);\n    tabsInfo[tabUuid] = {\n        id: info.id,\n        favIconUrl: info.favIconUrl,\n        url: info.url,\n        title: info.title,\n        isRestricted: isRestrictedUrl(info.url),\n        uuid: tabUuid,\n    };\n}\nfunction getExistingIndexTabGroup(tabId) {\n    let existingIndexTabGroup = mediaInTabs.findIndex(({ tabId }) => tabId === tabId);\n    if (existingIndexTabGroup === -1) {\n        mediaInTabs.push({\n            tabId,\n            elements: [],\n        });\n        existingIndexTabGroup = mediaInTabs.length - 1;\n    }\n    return existingIndexTabGroup;\n}\nfunction getExistingTabIndexInGroup(tabUuid, existingIndexTabGroup) {\n    let existingIndex = mediaInTabs[existingIndexTabGroup].elements.findIndex(obj => obj.tabUuid === tabUuid);\n    if (existingIndex === -1) {\n        mediaInTabs[existingIndexTabGroup].elements.push({\n            media: {\n                image: [],\n                video: [],\n                audio: [],\n            },\n            tabUuid,\n        });\n        existingIndex = mediaInTabs[existingIndexTabGroup].elements.length - 1;\n    }\n    return existingIndex;\n}\nfunction updateMediaCount() {\n    let countData = {\n        image: 0,\n        audio: 0,\n        video: 0,\n    };\n    mediaInTabs.forEach(group => {\n        group.elements.forEach(info => {\n            setTabExpanded(info.tabUuid, false);\n            mediaTypes.forEach(type => {\n                countData[type] += info.media[type].length;\n            });\n        });\n    });\n    mediaTypes.forEach(type => {\n        q(`.section-buttons button[data-section=\"${type}\"] .items-count`).innerHTML = countData[type].toString();\n    });\n}\nexport function sendMediaListener(data) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (data.error && Object.keys(data.error).length > 0) {\n            /// error\n            console.log(data);\n            return;\n        }\n        const currentTab = data.tabInfo || (yield getCurrentTab());\n        if (!currentTab) {\n            return;\n        }\n        const newMedia = {\n            image: [],\n            video: [],\n            audio: [],\n        };\n        updateTabInfo(currentTab);\n        const tabUuid = getUuid(`${currentTab.id}-${currentTab.url}`);\n        const restricted = isRestrictedUrl(currentTab.url);\n        let existingIndexTabGroup = getExistingIndexTabGroup(currentTab.id);\n        if (restricted) {\n            displayMedia();\n            return;\n        }\n        const existingIndex = getExistingTabIndexInGroup(tabUuid, existingIndexTabGroup);\n        const { media } = mediaInTabs[existingIndexTabGroup].elements[existingIndex];\n        const returnedMedia = {\n            image: data.image,\n            audio: data.audio,\n            video: data.video,\n        };\n        mediaTypes\n            .filter(type => !!returnedMedia[type])\n            .forEach(type => {\n            returnedMedia[type]\n                .forEach((item) => newMedia[type].push(item));\n            mediaInTabs[existingIndexTabGroup].elements[existingIndex].media[type] = uniqueSourceItems([\n                ...media[type],\n                ...newMedia[type],\n            ]);\n        });\n        console.log({ mediaInTabs });\n        updateMediaCount();\n        setTabExpanded(tabUuid, true);\n        displayMedia();\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { MessageEventNameEnum } from '../types/message-event-name.enum';\nimport { getTab, onMessage } from '../utils/chrome-api';\nimport { findMedia } from './find-media';\nimport { sendMediaListener } from './send-media-listener';\nfunction tabCreatedListener(tab) {\n    if (tab.active) {\n        findMedia(tab.id);\n    }\n}\nfunction tabUpdatedListener(tabId, changeInfo, tab) {\n    if (tab.active && changeInfo.status === 'complete') {\n        findMedia(tab.id);\n    }\n}\nfunction tabReplacedListener(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const tab = yield getTab(tabId);\n        if (!tab) {\n            return;\n        }\n        if (tab.active) {\n            findMedia(tabId);\n        }\n    });\n}\nfunction tabActivatedListener(tabId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const tab = yield getTab(tabId);\n        if (!tab) {\n            return;\n        }\n        if (tab.active) {\n            findMedia(tabId);\n        }\n    });\n}\nexport function setMessageListeners() {\n    onMessage((message) => {\n        const { eventName, data } = message;\n        console.log(eventName, data);\n        switch (eventName) {\n            case MessageEventNameEnum.TAB_UPDATED:\n                tabUpdatedListener(data.tabId, data.changeInfo, data.tab);\n                break;\n            case MessageEventNameEnum.TAB_ACTIVATED:\n                tabActivatedListener(data.tabId);\n                break;\n            case MessageEventNameEnum.TAB_CREATED:\n                tabCreatedListener(data.tab);\n                break;\n            case MessageEventNameEnum.TAB_REPLACED:\n                tabReplacedListener(data.tabId);\n                break;\n            case MessageEventNameEnum.SEND_MEDIA:\n                sendMediaListener(data);\n                break;\n        }\n    });\n}\n","import { MediaInfoKeyEnum } from '../types/media-in-tabs.type';\nimport { getStorageValue } from '../utils/chrome-api';\nimport { DEFAULT_SETTINGS, DefaultActionType, ThemeType } from './storage-def';\nexport function getStorageDefaultActionValue(callback) {\n    getStorageValue({ defaultAction: DefaultActionType.POPUP }, ({ defaultAction }) => {\n        if (!defaultAction) {\n            defaultAction = DEFAULT_SETTINGS.defaultAction;\n        }\n        callback(defaultAction);\n    });\n}\nexport function getStorageThemeValue(callback) {\n    getStorageValue({ theme: ThemeType.SYSTEM }, ({ theme }) => {\n        if (!theme) {\n            theme = DEFAULT_SETTINGS.theme;\n        }\n        callback(theme);\n    });\n}\nexport function getStoragePreviousVersionValue(callback) {\n    getStorageValue({ previousVersion: null }, ({ previousVersion }) => {\n        if (!previousVersion) {\n            previousVersion = DEFAULT_SETTINGS.previousVersion;\n        }\n        callback(previousVersion);\n    });\n}\nexport function getShowChangeLogLinkValue(callback) {\n    getStorageValue({ showChangelogLink: false }, ({ showChangelogLink }) => {\n        callback(!!showChangelogLink);\n    });\n}\nexport function getLastOpenSectionValue(callback) {\n    getStorageValue({ lastOpenSection: MediaInfoKeyEnum.IMAGE }, ({ lastOpenSection }) => {\n        if (!lastOpenSection) {\n            lastOpenSection = DEFAULT_SETTINGS.lastOpenSection;\n        }\n        callback(lastOpenSection);\n    });\n}\n","import { getLastOpenSectionValue, getShowChangeLogLinkValue } from '../storage/storage-fn';\nimport { show } from '../utils/dom-functions';\nimport { selectSection, setDomListeners } from './dom-listeners';\nimport { findMedia } from './find-media';\nimport { setMessageListeners } from './message-listeners';\nfunction init() {\n    findMedia();\n    setMessageListeners();\n    setDomListeners();\n    getShowChangeLogLinkValue(showChangelogLink => {\n        if (showChangelogLink) {\n            show('.changelog-link');\n        }\n    });\n    getLastOpenSectionValue(lastOpenSection => {\n        selectSection(lastOpenSection);\n    });\n}\ninit();\n"],"names":["MediaInfoKeyEnum","DefaultActionType","ThemeType","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","getCurrentTab","this","_a","_b","queryOptions","active","lastFocusedWindow","tab","chrome","tabs","query","console","log","url","startsWith","_c","getTab","tabId","get","runtime","lastError","error","obj","callback","storage","sync","setStorageValue","set","theme","SYSTEM","defaultAction","POPUP","previousVersion","showChangelogLink","lastOpenSection","IMAGE","toggleClass","selector","className","toggleValue","elements","data","els","document","querySelectorAll","forEach","el","push","qAll","Array","isArray","length","element","classList","contains","remove","add","createElement","tagName","props","children","class","html","innerHTML","attributes","attr","Object","entries","setAttribute","type","title","alt","src","HTMLElement","append","createDivElement","createSpanElement","createButtonElement","createImgElement","createIconElement","name","size","q","querySelector","keys","mediaInTabs","tabExpanded","tabsInfo","getThumbnailContainer","getAccordionBody","items","tabUuid","restricted","body","appendChild","href","map","item","itemIndex","poster","selected","filetype","gridItem","btn","anchor","download","dimensionsDiv","details","thumbnail","textContent","properties","width","height","thumbnailDiv","imgElement","getImageThumbnail","AUDIO","duration","icon","getAudioThumbnail","VIDEO","imagePoster","getVideoThumbnail","getGridItem","uuid","updateAccordionData","mediaToDisplay","accordion","group","groupDiv","mediaToDisplayItem","id","favIconUrl","isRestricted","header","favicon","allCount","getAccordionItem","getAccordionGroup","crcTable","c","table","n","k","getUuid","val","str","crc","i","charCodeAt","crc32","toString","padStart","getAllMediaToDisplay","currentSection","getAttribute","media","itemType","mapMediaItemToDisplayMediaItem","mapFn","displayMedia","reduce","total","mediaGroup","_total","countAllMedia","setTabExpanded","downloadItem","itemInfo","filename","downloadOptions","downloads","downloadUrl","mediaTypes","changeToggleAllCheckbox","checked","target","allAreChecked","allAreUnchecked","selectedCount","idx","_idx","updateSelectedCountText","toggle_all_checkbox","indeterminate","disabled","selectSection","includes","findMedia","scriptUrl_1","arguments","scriptUrl","scripting","executeScript","allFrames","files","executeContentScript","MessageEventNameEnum","restrictedUrls","isRestrictedUrl","some","restrictedUrl","sendMediaListener","currentTab","tabInfo","newMedia","image","video","audio","info","updateTabInfo","existingIndexTabGroup","findIndex","getExistingIndexTabGroup","existingIndex","getExistingTabIndexInGroup","returnedMedia","filter","arr","Map","values","countData","updateMediaCount","message","eventName","TAB_UPDATED","changeInfo","status","TAB_ACTIVATED","tabActivatedListener","TAB_CREATED","tabCreatedListener","TAB_REPLACED","tabReplacedListener","SEND_MEDIA","onMessage","addListener","setMessageListeners","addEventListener","closest","checkedImages","downloadImages","matches","newValue","tab_id","itemIdx","split","groupIndexInSection","tabIndexInSection","onClickItem","window","open","create","hidden","hide","show"],"sourceRoot":""}